=== Docker build Dockerfile.github
[2018-12-14 08:09.23] Starting...
Cloning into '/tmp/with_clone2940155a'...
done.
HEAD is now at 49cb936 circleci: update to v2.0
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.558 MBSending build context to Docker daemon 5.558 MB
Step 1/22 : FROM ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
alpine-3.5_ocaml-4.05.0: Pulling from ocaml/opam-dev
Digest: sha256:56eabc77608dac440c0907a0d3d3c2fbff0d65141b20dc5296783c21d42310d3
Status: Image is up to date for ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
 ---> 1b9232af4c8c
Step 2/22 : RUN sudo apk add --no-cache tzdata aspcud gmp-dev perl libev-dev m4
 ---> Using cache
 ---> 04e887bc34dd
Step 3/22 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> edf1e303d39f
Step 4/22 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 818ebb219 --hard &&     opam update -u
 ---> Using cache
 ---> 1a429c79664c
Step 5/22 : RUN opam install alcotest lwt conf-libev inotify tls
 ---> Using cache
 ---> c6c018a42f9b
Step 6/22 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> 88d1ec358eff
Step 7/22 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 386cb9ebd92e
Step 8/22 : COPY *.opam /home/opam/src/datakit/
 ---> Using cache
 ---> 0b9cf170f2e9
Step 9/22 : RUN opam pin add /home/opam/src/datakit/ -n
 ---> Using cache
 ---> 8bf0e81abd0a
Step 10/22 : RUN opam install datakit-bridge-github --deps -t
 ---> Using cache
 ---> 2e3fe07878a9
Step 11/22 : COPY . /home/opam/src/datakit
 ---> 595bfcc83eb2
Removing intermediate container 6b7ac1e713ff
Step 12/22 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in adcba1d9f3e2
 ---> dfe750b65221
Error removing intermediate container adcba1d9f3e2: driver "aufs" failed to remove root filesystem for adcba1d9f3e2ce5061b1e220ce069e317f4758a0e1280969a13ce6575233673f: could not remove diff path for id f01f4679da48f5a0fee7432c5f618c020ebf00f680724dee3b377182b8c98a63: error preparing atomic delete: rename /var/lib/docker/aufs/diff/f01f4679da48f5a0fee7432c5f618c020ebf00f680724dee3b377182b8c98a63 /var/lib/docker/aufs/diff/f01f4679da48f5a0fee7432c5f618c020ebf00f680724dee3b377182b8c98a63-removing: device or resource busy
Step 13/22 : RUN opam update --dev && opam upgrade
 ---> Running in 9fd603394b10

=-=- Synchronising development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-ci.0.12.1] synchronised from file:///home/opam/src/datakit
[datakit-client.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit.bak
[datakit-bridge-github] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-bridge-github (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-bridge-github.bak
[datakit-bridge-local-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-ci] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-9p] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-github] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server-9p] Installing new package description from upstream file:///home/opam/src/datakit
Now run 'opam upgrade' to apply any package updates.
The following actions will be performed:
  - recompile datakit-server     0.12.0* [upstream changes]
  - recompile datakit-client     0.12.0* [upstream changes]
  - recompile datakit-server-9p  0.12.0* [upstream changes]
  - recompile datakit-client-git 0.12.0* [upstream changes]
  - recompile datakit-client-9p  0.12.0* [upstream changes]
  - recompile datakit            0.12.0* [upstream changes]
  - recompile datakit-github     0.12.0* [upstream changes]
===== 7 to recompile =====

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-github.0.12.0
-> removed   datakit-client-9p.0.12.0
-> removed   datakit-client-git.0.12.0
-> removed   datakit-client.0.12.0
-> removed   datakit.0.12.0
-> removed   datakit-server-9p.0.12.0
-> removed   datakit-server.0.12.0
-> installed datakit-client.0.12.0
-> installed datakit-client-9p.0.12.0
-> installed datakit-client-git.0.12.0
-> installed datakit-github.0.12.0
-> installed datakit-server.0.12.0
-> installed datakit-server-9p.0.12.0
-> installed datakit.0.12.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> bcbead2f3141
Removing intermediate container adcba1d9f3e2
Removing intermediate container 9fd603394b10
Step 14/22 : RUN opam install datakit-bridge-github -ytv
 ---> Running in 25c330e01ff7

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit-bridge-github.0.12.0: rsync]
[datakit-bridge-github.0.12.0] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-bridge-github 0.12.0* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/2: [datakit-bridge-github: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "datakit-bridge-github" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-bridge-github.0.12.0)
-     ocamlopt bridge/github/.datakit_bridge_github.objs/datakit_github_api.{cmx,o} (exit 2)
- (cd _build/default && /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/ocamlopt.opt -w -40 -g -I bridge/github/.datakit_bridge_github.objs -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/asetmap -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/asn1-combinators -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/astring -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/atd -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/atdgen -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base/caml -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base/shadow_stdlib -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base64 -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/biniou -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/bytes -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cohttp -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cohttp-lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cohttp-lwt-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/conduit -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/conduit-lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/conduit-lwt-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cstruct -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cstruct-lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/datakit-client -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/datakit-github -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/easy-format -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/fieldslib -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/fmt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github-hooks -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github-hooks-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/hex -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ipaddr -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ipaddr/unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/logs -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/magic-mime -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/nocrypto -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ocaml/threads -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ptime -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ptime/os -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/re -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/re/posix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/result -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/rresult -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/sexplib -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/sexplib/0 -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/stringext -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/tls -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/uchar -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/uri -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/uri/services -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/x509 -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/yojson -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/zarith -no-alias-deps -o bridge/github/.datakit_bridge_github.objs/datakit_github_api.cmx -c -impl bridge/github/datakit_github_api.ml)
- File "bridge/github/datakit_github_api.ml", line 163, characters 28-47:
- Error: This expression has type Github_t.status_state
-        but an expression was expected of type
-          [< `Error | `Failure | `Pending | `Success | `Unknown of string ]
-        Types for tag `Unknown are incompatible


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions failed
| - build datakit-bridge-github 0.12.0
+- 
- No changes have been performed
[91m[ERROR] The compilation of datakit-bridge-github failed at "/home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder build -p datakit-bridge-github -j 1".

#=== ERROR while compiling datakit-bridge-github.0.12.0 =======================#
# context              2.0.0~beta5 | linux/x86_64 | ocaml-base-compiler.4.05.0 | pinned(file:///home/opam/src/datakit)
# path                 ~/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-bridge-github.0.12.0
# command              ~/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder build -p datakit-bridge-github -j 1
# exit-code            1
# env-file             ~/.opam/log/datakit-bridge-github-7-5f1023.env
# output-file          ~/.opam/log/datakit-bridge-github-7-5f1023.out
### output ###
#     ocamlopt bridge/github/.datakit_bridge_github.objs/datakit_github_api.{cmx,o} (exit 2)
# (cd _build/default && /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/ocamlopt.opt -w -40 -g -I bridge/github/.datakit_bridge_github.objs -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/asetmap -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/asn1-combinators -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/astring -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/atd -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/atdgen -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base/caml -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base/shadow_stdlib -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/base64 -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/biniou -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/bytes -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cohttp -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cohttp-lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cohttp-lwt-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/conduit -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/conduit-lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/conduit-lwt-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cstruct -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/cstruct-lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/datakit-client -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/datakit-github -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/easy-format -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/fieldslib -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/fmt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github-hooks -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github-hooks-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/github-unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/hex -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ipaddr -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ipaddr/unix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/logs -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/lwt -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/magic-mime -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/nocrypto -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ocaml/threads -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ptime -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ptime/os -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/re -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/re/posix -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/result -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/rresult -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/sexplib -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/sexplib/0 -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/stringext -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/tls -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/uchar -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/uri -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/uri/services -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/x509 -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/yojson -I /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/zarith -no-alias-deps -o bridge/github/.datakit_bridge_github.objs/datakit_github_api.cmx -c -impl bridge/github/datakit_github_api.ml)
# File "bridge/github/datakit_github_api.ml", line 163, characters 28-47:
# Error: This expression has type Github_t.status_state
#        but an expression was expected of type
#          [< `Error | `Failure | `Pending | `Success | `Unknown of string ]
#        Types for tag `Unknown are incompatible

[0m# Run eval $(opam env) to update the current shell environment
[91m'opam install datakit-bridge-github -ytv' failed.
[0mThe command '/bin/sh -c opam install datakit-bridge-github -ytv' returned a non-zero code: 31
[2018-12-14 08:09.56] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile.github" "." exited with status 31
