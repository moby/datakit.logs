=== Docker build Dockerfile.ci
[2017-05-16 00:22.48] Starting...
Cloning into '/tmp/with_clone238e538d'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at a6dbc5b Merge pull request #556 from samoht/irmin
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.352 MB
Step 1/22 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/22 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 20061f41087f
Step 3/22 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> c9c160bcf357
Step 4/22 : RUN opam pin add irmin.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 922f5a22efbf
Step 5/22 : RUN opam pin add irmin-mem.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> d68c5b048d8e
Step 6/22 : RUN opam pin add irmin-fs.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 4eb1bb7e533c
Step 7/22 : RUN opam pin add irmin-http.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 764e2580f7f8
Step 8/22 : RUN opam pin add irmin-git.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 2b279efa5e15
Step 9/22 : RUN opam pin add irmin-unix.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 8ac0bba2d9be
Step 10/22 : RUN opam pin add -yn protocol-9p.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> d657d0739bc1
Step 11/22 : RUN opam pin add -yn protocol-9p-unix.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> 2c65d88a4ec4
Step 12/22 : RUN opam depext -i asl win-eventlog camlzip alcotest mtime mirage-flow hvsock     git irmin irmin-unix lwt protocol-9p-unix tyxml redis multipart-form-data     pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner     webmachine alcotest
 ---> Using cache
 ---> c78221a01d99
Step 13/22 : ADD . /home/opam/datakit
 ---> 71ca427e78fa
Removing intermediate container 406dda485573
Step 14/22 : RUN sudo chown opam /home/opam/datakit
 ---> Running in 6800e1098411
 ---> df71dcce0b3f
Error removing intermediate container 6800e1098411: Driver aufs failed to remove root filesystem 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b: rename /var/lib/docker/aufs/mnt/9cf725ce8a069bd46d031ee19ba6d47ac2829c77d3e79348629c33b340c92861 /var/lib/docker/aufs/mnt/9cf725ce8a069bd46d031ee19ba6d47ac2829c77d3e79348629c33b340c92861-removing: device or resource busy
Step 15/22 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in f64bc369996a
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
datakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mThe following actions will be performed:
  - install datakit-client dev*
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> e1d471cb7f2f
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Step 16/22 : RUN opam pin add -k git datakit-client-9p.dev /home/opam/datakit -y
 ---> Running in c0a00d5c1093
Package datakit-client-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta
[0mdatakit-client-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client-9p dev*
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> afa76dd8ed52
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Step 17/22 : RUN opam pin add -k git datakit-server.dev /home/opam/datakit -y
 ---> Running in 6382059caa2f
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev*
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> b2e86658a558
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Step 18/22 : RUN opam pin add -k git datakit-server-9p.dev /home/opam/datakit -y
 ---> Running in 7bcd4998dd53
Package datakit-server-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta
[0mdatakit-server-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server-9p dev*
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 7738f18165d2
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Step 19/22 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in 48ee27205e56
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 2dc8d9c9291b
Removing intermediate container c0a00d5c1093
Removing intermediate container 6382059caa2f
Removing intermediate container 7bcd4998dd53
Removing intermediate container 48ee27205e56
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Step 20/22 : RUN opam pin add -k git datakit.dev /home/opam/datakit -y
 ---> Running in d660a8ab9d30
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install irmin-mem 1.2.0*                                    [required by datakit]
  - install datakit   dev*
===== 2 to install =====
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[irmin-mem.1.2.0] synchronised from git+https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed irmin-mem.1.2.0
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 490f1a7f9135
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Step 21/22 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in 235acf56aa39
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 5e1861f3bac8
Removing intermediate container f64bc369996a
Removing intermediate container d660a8ab9d30
Removing intermediate container 235acf56aa39
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Step 22/22 : VOLUME /secrets
 ---> Running in 7937e7b877e7
 ---> 576ed0fb8b4b
Error removing intermediate container 6800e1098411: No such container: 6800e1098411776a6fae231352e53a352337c8a65592fd5e6ec83cecffd4b46b
Successfully built 576ed0fb8b4b
[2017-05-16 00:24.55] Success
