=== Docker build Dockerfile.bridge-local-git
[2017-02-09 14:31.31] Starting...
Cloning into '/tmp/with_clone1ddf3cb8'...
done.
HEAD is now at e7f6348 self-ci: shrink Docker image size
[2017-02-09 14:32.15] Rewrite Dockerfile's first line to:
FROM sha256:f8e83f07e52962236d9f46a2b41af3d3905c26ee8100ae4b8fc343d9c1197def
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.654 MBSending build context to Docker daemon 6.654 MB
Step 1/17 : FROM sha256:f8e83f07e52962236d9f46a2b41af3d3905c26ee8100ae4b8fc343d9c1197def
 ---> f8e83f07e529
Step 2/17 : RUN opam pin add github --dev -n
 ---> Running in 14fae055e12d
github is now git-pinned to https://github.com/mirage/ocaml-github.git

[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github] https://github.com/mirage/ocaml-github.git updated

 ---> a376254953af
Removing intermediate container 14fae055e12d
Step 3/17 : RUN opam pin add datakit-github.dev /home/opam/src/datakit -n
 ---> Running in ad49a6b78c90
datakit-github is now path-pinned to /home/opam/src/datakit

[datakit-github: local]
[datakit-github] /home/opam/src/datakit/ synchronized
[datakit-github] Installing new package description from /home/opam/src/datakit

 ---> 1fc3fdb8b94a
Removing intermediate container ad49a6b78c90
Step 4/17 : RUN opam depext datakit-github && opam install datakit-github --deps
 ---> Running in 1c8f1b16564d
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - gmp-dev
#  - linux-headers
#  - m4
#  - ncurses-dev
#  - openssl-dev
#  - perl
#  - pkgconfig
m4
ncurses-dev
pkgconfig
# The following new OS packages need to be installed: gmp-dev linux-headers openssl-dev perl
The following command needs to be run through "sudo":
    apk add gmp-dev linux-headers openssl-dev perl
(1/6) Installing libgmpxx (6.1.0-r0)
(2/6) Installing gmp-dev (6.1.0-r0)
(3/6) Installing linux-headers (4.4.6-r1)
(4/6) Installing zlib-dev (1.2.8-r2)
(5/6) Installing openssl-dev (1.0.2k-r0)
(6/6) Installing perl (5.22.2-r0)
Executing busybox-1.24.2-r13.trigger
OK: 479 MiB in 90 packages
# OS packages installation successful

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github: local] Command started
[datakit-github] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install   conf-perl        1             
  - install   camomile         0.8.5         
  - install   mtime            0.8.4         
  - install   magic-mime       1.0.0         
  - install   easy-format      1.2.0         
  - install   conf-gmp         1             
  - install   fieldslib        113.24.00     
  - install   duration         0.1.0         
  - install   ocamlify         0.0.1         
  - install   menhir           20170101      
  - install   ocamlmod         0.0.8         
  - install   asetmap          0.8.1         
  - install   react            1.2.0         
  - install   base64           2.1.2         
  - install   conf-which       1             
  - install   mirage-no-xen    1             
  - install   zarith           1.4.1         
  - install   ppx_fields_conv  113.33.00+4.03
  - install   atd              1.2.0         
  - install   oasis            0.4.8         
  - install   zed              1.4           
  - recompile lwt              2.7.0         
       For module Lwt_react, please install package lwt_react
  - install   biniou           1.0.12        
  - install   prometheus       0.1           
  - install   lambda-term      1.10.1        
  - recompile named-pipe       0.4.0         
  - recompile logs             0.6.2         
  - recompile cstruct          2.3.1         
  - install   yojson           1.3.3         
  - install   win-eventlog     0.1           
  - install   asl              0.10          
  - install   nocrypto         0.5.3         
  - install   hex              1.0.0         
  - install   asn1-combinators 0.1.3         
  - recompile io-page          1.6.1         
  - install   atdgen           1.10.0        
  - install   x509             0.5.3         
  - recompile mirage-types     2.8.0         
  - recompile mirage-types-lwt 2.8.0         
  - install   tls              0.7.1         
  - install   mirage-flow      1.1.0         
  - recompile channel          1.1.1         
  - install   conduit          0.14.5        
  - install   hvsock           0.11.1        
  - recompile protocol-9p      0.8.0         
  - install   cohttp           0.21.0        
  - install   datakit-server   0.8.0         
  - recompile datakit-client   dev*          
  - install   prometheus-app   0.1           
  - install   github           2.2.0*        
  - install   github-hooks     0.1.1         
===== 41 to install | 10 to recompile =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asetmap: http] Command started
[asl: http] Command started
[asn1-combinators: http] Command started
[asetmap: http] Command started
[asetmap.0.8.1] http://erratique.ch/software/asetmap/releases/asetmap-0.8.1.tbz downloaded
[atd: http] Command started
[asn1-combinators: http] Command started
[asn1-combinators.0.1.3] https://github.com/mirleft/ocaml-asn1-combinators/releases/download/v0.1.3/asn1-combinators-0.1.3.tbz downloaded
[atdgen: http] Command started
[asl: http] Command started
[asl.0.10] https://github.com/mirage/ocaml-asl/archive/v0.10.tar.gz downloaded
[base64: http] Command started
[atd: http] Command started
[atd.1.2.0] https://github.com/mjambon/atd/archive/v1.2.0.tar.gz downloaded
[biniou: http] Command started
[atdgen: http] Command started
[atdgen.1.10.0] https://github.com/mjambon/atdgen/archive/v1.10.0.tar.gz downloaded
[camomile: http] Command started
[base64: http] Command started
[base64.2.1.2] https://github.com/mirage/ocaml-base64/releases/download/v2.1.2/base64-2.1.2.tbz downloaded
[cohttp: http] Command started
[biniou: http] Command started
[biniou.1.0.12] https://github.com/mjambon/biniou/archive/v1.0.12.tar.gz downloaded
[conduit: http] Command started
[conduit: http] Command started
[conduit.0.14.5] https://github.com/mirage/ocaml-conduit/archive/v0.14.5.tar.gz downloaded
[datakit-client: local] Command started
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date
[datakit-server: http] Command started
[cohttp: http] Command started
[cohttp.0.21.0] https://github.com/mirage/ocaml-cohttp/archive/v0.21.0.tar.gz downloaded
[duration: http] Command started
[duration: http] Command started
[duration.0.1.0] https://github.com/hannesm/duration/releases/download/0.1.0/duration-0.1.0.tbz downloaded
[easy-format: http] Command started
[datakit-server: http] Command started
[datakit-server.0.8.0] https://github.com/docker/datakit/releases/download/0.8.0/datakit-0.8.0.tbz downloaded
[fieldslib: http] Command started
[camomile: http] Command started
[camomile.0.8.5] https://github.com/yoriyuki/Camomile/releases/download/rel-0.8.5/camomile-0.8.5.tar.bz2 downloaded
[github: git] Command started
[github: git] Command started
[easy-format: http] Command started
[easy-format.1.2.0] https://github.com/mjambon/easy-format/archive/v1.2.0.tar.gz downloaded
[github-hooks: http] Command started
[fieldslib: http] Command started
[fieldslib.113.24.00] https://ocaml.janestreet.com/ocaml-core/113.24/files/fieldslib-113.24.00.tar.gz downloaded
[hex: http] Command started
[github: git] Command started
[github: git] Command started
[github] https://github.com/mirage/ocaml-github.git already up-to-date
[hvsock: http] Command started
[github-hooks: http] Command started
[github-hooks.0.1.1] https://github.com/dsheets/ocaml-github-hooks/releases/download/0.1.1/github-hooks-0.1.1.tbz downloaded
[lambda-term: http] Command started
[hex: http] Command started
[hex.1.0.0] https://github.com/mirage/ocaml-hex/archive/1.0.0.tar.gz downloaded
[magic-mime: http] Command started
[hvsock: http] Command started
[hvsock.0.11.1] https://github.com/mirage/ocaml-hvsock/archive/v0.11.1.tar.gz downloaded
[menhir: http] Command started
[menhir: http] Command started
[menhir.20170101] http://gallium.inria.fr/~fpottier/menhir/menhir-20170101.tar.gz downloaded
[mirage-flow: http] Command started
[lambda-term: http] Command started
[lambda-term.1.10.1] https://github.com/diml/lambda-term/archive/1.10.1.tar.gz downloaded
[mtime: http] Command started
[mtime: http] Command started
[mtime.0.8.4] http://erratique.ch/software/mtime/releases/mtime-0.8.4.tbz downloaded
[nocrypto: http] Command started
[magic-mime: http] Command started
[magic-mime.1.0.0] https://github.com/mirage/ocaml-magic-mime/archive/v1.0.0.tar.gz downloaded
[oasis: http] Command started
[mirage-flow: http] Command started
[mirage-flow.1.1.0] https://github.com/mirage/mirage-flow/archive/v1.1.0.tar.gz downloaded
[ocamlify: http] Command started
[nocrypto: http] Command started
[nocrypto.0.5.3] https://github.com/mirleft/ocaml-nocrypto/archive/v0.5.3.tar.gz downloaded
[ocamlmod: http] Command started
[ocamlify: http] Command started
[ocamlify.0.0.1] http://forge.ocamlcore.org/frs/download.php/379/ocamlify-0.0.1.tar.gz downloaded
[ppx_fields_conv: http] Command started
[ppx_fields_conv: http] Command started
[ppx_fields_conv.113.33.00+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_fields_conv-113.33.00+4.03.tar.gz downloaded
[prometheus: http] Command started
[oasis: http] Command started
[oasis.0.4.8] https://forge.ocamlcore.org/frs/download.php/1669/oasis-0.4.8.tar.gz downloaded
[prometheus-app: http] Command started
[ocamlmod: http] Command started
[ocamlmod.0.0.8] https://forge.ocamlcore.org/frs/download.php/1544/ocamlmod-0.0.8.tar.gz downloaded
[react: http] Command started
[react: http] Command started
[react.1.2.0] http://erratique.ch/software/react/releases/react-1.2.0.tbz downloaded
[tls: http] Command started
[prometheus: http] Command started
[prometheus.0.1] https://github.com/mirage/prometheus/releases/download/v0.1/prometheus-0.1.tbz downloaded
[win-eventlog: http] Command started
[prometheus-app: http] Command started
[prometheus-app.0.1] https://github.com/mirage/prometheus/releases/download/v0.1/prometheus-0.1.tbz downloaded
[x509: http] Command started
[win-eventlog: http] Command started
[win-eventlog.0.1] https://github.com/djs55/ocaml-win-eventlog/archive/v0.1.tar.gz downloaded
[yojson: http] Command started
[tls: http] Command started
[tls.0.7.1] https://github.com/mirleft/ocaml-tls/archive/0.7.1.tar.gz downloaded
[zarith: http] Command started
[x509: http] Command started
[x509.0.5.3] https://github.com/mirleft/ocaml-x509/archive/0.5.3.tar.gz downloaded
[zed: http] Command started
[zarith: http] Command started
[zarith.1.4.1] https://forge.ocamlcore.org/frs/download.php/1574/zarith-1.4.1.tgz downloaded
[yojson: http] Command started
[yojson.1.3.3] https://github.com/mjambon/yojson/archive/v1.3.3.tar.gz downloaded
[zed: http] Command started
[zed.1.4] https://github.com/diml/zed/archive/1.4.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-client.dev
-> removed   protocol-9p.0.8.0
-> removed   channel.1.1.1
-> removed   logs.0.6.2
-> removed   mirage-types-lwt.2.8.0
[mirage-types: ocamlfind remove] Command started
-> removed   named-pipe.0.4.0
[asetmap: ocaml build] Command started
[base64: ocaml build] Command started
[camomile: ./configure] Command started
-> removed   mirage-types.2.8.0
[io-page: ocamlfind remove] Command started
-> installed asetmap.0.8.1
[conf-gmp: sh] Command started
-> installed base64.2.1.2
[conf-perl: perl] Command started
-> removed   io-page.1.6.1
[cstruct: make js-uninstall] Command started
-> installed conf-gmp.1
[conf-which: which which] Command started
-> installed conf-perl.1
[duration: ocaml build] Command started
[cstruct: ocamlfind remove] Command started
-> installed conf-which.1
[easy-format: make] Command started
-> removed   cstruct.2.3.1
[lwt: ocamlfind remove] Command started
-> removed   lwt.2.7.0
[fieldslib: ./configure] Command started
[easy-format: make install] Command started
-> installed easy-format.1.2.0
[biniou: make] Command started
[camomile: make] Command started
-> installed duration.0.1.0
[magic-mime: ./configure] Command started
[fieldslib: make] Command started
[magic-mime: make] Command started
[biniou: make install] Command started
-> installed biniou.1.0.12
[menhir: make Makefile] Command started
-> installed fieldslib.113.24.00
-> installed mirage-no-xen.1
[mtime: ocaml build] Command started
[magic-mime: make install] Command started
-> installed magic-mime.1.0.0
[ocamlify: ocaml setup.ml] Command started
-> installed mtime.0.8.4
[ocamlmod: ocaml setup.ml] Command started
[ocamlify: ocaml setup.ml] Command started
[ocamlmod: ocaml setup.ml] Command started
[ocamlify: ocaml setup.ml] Command started
-> installed ocamlify.0.0.1
[ppx_fields_conv: ./configure] Command started
[ocamlmod: ocaml setup.ml] Command started
[ppx_fields_conv: make] Command started
-> installed ocamlmod.0.0.8
[oasis: ocaml setup.ml] Command started
[oasis: ocaml setup.ml] Command started
-> installed ppx_fields_conv.113.33.00+4.03
[react: ocaml] Command started
[react: ocaml] Command started
-> installed react.1.2.0
[lwt: make setup] Command started
[lwt: ocaml setup.ml] Command started
[lwt: make build] Command started
[menhir: make Makefile] Command started
-> installed menhir.20170101
[atd: make] Command started
[atd: make install] Command started
-> installed atd.1.2.0
[yojson: make] Command started
[camomile: make install] Command started
-> installed camomile.0.8.5
[zarith: ./configure] Command started
[yojson: make install-lib] Command started
-> installed yojson.1.3.3
[atdgen: make] Command started
[zarith: make] Command started
[lwt: make install] Command started
-> installed lwt.2.7.0
[cstruct: ./configure] Command started
[cstruct: make] Command started
[oasis: ocaml setup.ml] Command started
[zarith: make install] Command started
-> installed zarith.1.4.1
[logs: ocaml build] Command started
[atdgen: make findlib-install] Command started
-> installed atdgen.1.10.0
[named-pipe: ocaml build] Command started
-> installed logs.0.6.2
[asl: make] Command started
-> installed oasis.0.4.8
[prometheus: ocaml build] Command started
-> installed prometheus.0.1
[win-eventlog: make] Command started
[cstruct: make install] Command started
-> installed named-pipe.0.4.0
[zed: ocaml setup.ml] Command started
[cstruct: make js-install] Command started
-> installed cstruct.2.3.1
[asn1-combinators: ocaml build] Command started
[zed: ocaml setup.ml] Command started
[asl: make install] Command started
-> installed asn1-combinators.0.1.3
[hex: ./configure] Command started
-> installed asl.0.10
[io-page: ./configure] Command started
[win-eventlog: make install] Command started
[hex: make] Command started
-> installed win-eventlog.0.1
[nocrypto: ./configure] Command started
[io-page: make] Command started
[zed: ocaml setup.ml] Command started
-> installed zed.1.4
[lambda-term: ocaml setup.ml] Command started
[hex: make install] Command started
[nocrypto: make] Command started
[io-page: make install] Command started
[lambda-term: ocaml setup.ml] Command started
-> installed hex.1.0.0
-> installed io-page.1.6.1
[mirage-types: make build-types] Command started
[mirage-types: make install-types] Command started
-> installed mirage-types.2.8.0
-> installed mirage-types-lwt.2.8.0
[channel: ocaml build] Command started
[mirage-flow: ./configure] Command started
-> installed channel.1.1.1
[mirage-flow: make] Command started
[mirage-flow: make install] Command started
-> installed mirage-flow.1.1.0
[hvsock: ocaml setup.ml] Command started
[hvsock: make] Command started
[nocrypto: make install] Command started
-> installed nocrypto.0.5.3
[x509: ./configure] Command started
[hvsock: make install] Command started
[x509: make] Command started
-> installed hvsock.0.11.1
[x509: make install] Command started
-> installed x509.0.5.3
[tls: ./configure] Command started
[tls: make] Command started
[lambda-term: ocaml setup.ml] Command started
-> installed lambda-term.1.10.1
[protocol-9p: ocaml build] Command started
-> installed protocol-9p.0.8.0
[datakit-client: ocaml build] Command started
[datakit-server: ocaml build] Command started
[tls: make install] Command started
-> installed tls.0.7.1
[conduit: ./configure] Command started
-> installed datakit-server.0.8.0
[conduit: make] Command started
-> installed datakit-client.dev
[conduit: make install] Command started
-> installed conduit.0.14.5
[cohttp: make] Command started
[cohttp: make install] Command started
-> installed cohttp.0.21.0
[github: ocaml setup.ml] Command started
[prometheus-app: ocaml build] Command started
-> installed prometheus-app.0.1
[github: ocaml setup.ml] Command started
[github: ocaml setup.ml] Command started
-> installed github.2.2.0
[github-hooks: ocaml build] Command started
-> installed github-hooks.0.1.1
Done.

=-=- lwt.2.7.0 installed successfully -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> The future Lwt 3.0.0 will make minor breaking changes near 1 April 2017. See
     https://github.com/ocsigen/lwt/issues/308
 ---> e054e4440532
Removing intermediate container 1c8f1b16564d
Step 5/17 : COPY datakit-bridge-local-git.opam /home/opam/src/datakit/datakit-bridge-local-git.opam
 ---> c8c5d368aa0c
Removing intermediate container b8711b9b641b
Step 6/17 : RUN opam pin add datakit-bridge-local-git.dev /home/opam/src/datakit -n
 ---> Running in 6de457b625e3
Package datakit-bridge-local-git does not exist, create as a NEW package ?
[Y/n] y
datakit-bridge-local-git is now path-pinned to /home/opam/src/datakit

[datakit-bridge-local-git: local]
[datakit-bridge-local-git] /home/opam/src/datakit/ synchronized
[datakit-bridge-local-git] Installing new package description from
/home/opam/src/datakit

 ---> bf9239769304
Removing intermediate container 6de457b625e3
Step 7/17 : RUN opam depext datakit-bridge-local-git && opam install datakit-bridge-local-git --deps
 ---> Running in b9cf47102733
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - gmp-dev
#  - linux-headers
#  - m4
#  - ncurses-dev
#  - openssl-dev
#  - perl
#  - pkgconfig
#  - zlib-dev
gmp-dev
linux-headers
m4
ncurses-dev
openssl-dev
perl
pkgconfig
zlib-dev
# All required OS packages found.

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
[datakit-bridge-local-git] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-github dev*          
  - install camlzip        1.07          
  - install bin_prot       113.33.00+4.03
  - install irmin-watcher  0.2.0         
  - install mstruct        1.3.2         
  - install crunch         1.4.1         
  - install uchar          0.0.1         
  - install ocamlgraph     1.8.7         
  - install uutf           1.0.0         
  - install git            1.9.3         
  - install jsonm          1.0.0         
  - install git-unix       1.7.1         
  - install ezjsonm        0.4.3         
  - install mirage-tc      0.3.0         
  - install irmin          0.12.0        
  - install irmin-unix     0.12.0        
===== 16 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[bin_prot: http] Command started
[camlzip: http] Command started
[crunch: http] Command started
[bin_prot: http] Command started
[bin_prot.113.33.00+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/bin_prot-113.33.00+4.03.tar.gz downloaded
[datakit-github: local] Command started
[datakit-github.dev] /home/opam/src/datakit/ already up-to-date
[ezjsonm: http] Command started
[camlzip: http] Command started
[camlzip.1.07] https://github.com/xavierleroy/camlzip/archive/rel107.zip downloaded
[git: http] Command started
[crunch: http] Command started
[crunch.1.4.1] https://github.com/mirage/ocaml-crunch/archive/v1.4.1.tar.gz downloaded
[irmin: http] Command started
[ezjsonm: http] Command started
[ezjsonm.0.4.3] https://github.com/mirage/ezjsonm/archive/0.4.3.tar.gz downloaded
[irmin-watcher: http] Command started
[irmin: http] Command started
[irmin.0.12.0] https://github.com/mirage/irmin/releases/download/0.12.0/irmin-0.12.0.tbz downloaded
[jsonm: http] Command started
[git: http] Command started
[git.1.9.3] https://github.com/mirage/ocaml-git/releases/download/1.9.3/git-1.9.3.tbz downloaded
[mirage-tc: http] Command started
[jsonm: http] Command started
[jsonm.1.0.0] http://erratique.ch/software/jsonm/releases/jsonm-1.0.0.tbz downloaded
[mstruct: http] Command started
[irmin-watcher: http] Command started
[irmin-watcher.0.2.0] https://github.com/samoht/irmin-watcher/releases/download/0.2.0/irmin-watcher-0.2.0.tbz downloaded
[ocamlgraph: http] Command started
[mirage-tc: http] Command started
[mirage-tc.0.3.0] https://github.com/mirage/mirage-tc/archive/0.3.0.tar.gz downloaded
[uchar: http] Command started
[mstruct: http] Command started
[mstruct.1.3.2] https://github.com/mirage/ocaml-mstruct/archive/1.3.2.tar.gz downloaded
[uutf: http] Command started
[uutf: http] Command started
[uutf.1.0.0] http://erratique.ch/software/uutf/releases/uutf-1.0.0.tbz downloaded
[ocamlgraph: http] Command started
[ocamlgraph.1.8.7] http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.7.tar.gz downloaded
[uchar: http] Command started
[uchar.0.0.1] https://github.com/ocaml/uchar/releases/download/v0.0.1/uchar-0.0.1.tbz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[bin_prot: ./configure] Command started
[camlzip: make all] Command started
[crunch: ocaml setup.ml] Command started
[datakit-github: ocaml build] Command started
[camlzip: make allopt] Command started
[camlzip: make install-findlib] Command started
-> installed camlzip.1.07
[irmin-watcher: ocaml build] Command started
[bin_prot: make] Command started
[crunch: ocaml setup.ml] Command started
-> installed irmin-watcher.0.2.0
[mstruct: ./configure] Command started
[crunch: ocaml setup.ml] Command started
[mstruct: make] Command started
-> installed crunch.1.4.1
[ocamlgraph: touch] Command started
[ocamlgraph: ./configure] Command started
-> installed bin_prot.113.33.00+4.03
[uchar: ocaml] Command started
[ocamlgraph: make] Command started
[uchar: ocaml] Command started
-> installed uchar.0.0.1
[uutf: ocaml build] Command started
[mstruct: make install] Command started
-> installed uutf.1.0.0
[jsonm: ocaml build] Command started
-> installed mstruct.1.3.2
-> installed datakit-github.dev
-> installed jsonm.1.0.0
[ezjsonm: ./configure] Command started
[ezjsonm: make] Command started
[ocamlgraph: make install-findlib] Command started
-> installed ocamlgraph.1.8.7
[git: ocaml build] Command started
[ezjsonm: make install] Command started
-> installed ezjsonm.0.4.3
[mirage-tc: ./configure] Command started
[mirage-tc: make] Command started
[mirage-tc: make install] Command started
-> installed mirage-tc.0.3.0
-> installed git.1.9.3
-> installed git-unix.1.7.1
[irmin: ocaml build] Command started
-> installed irmin.0.12.0
-> installed irmin-unix.0.12.0
Done.
 ---> a77c904e0f90
Removing intermediate container b9cf47102733
Step 8/17 : COPY . /home/opam/src/datakit/
 ---> 99f83ee08eab
Removing intermediate container 9e5507a6e199
Step 9/17 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 301bbe95de4f
 ---> ca70dffac9c7
Removing intermediate container 301bbe95de4f
Step 10/17 : RUN cd /home/opam/src/datakit &&     git diff && git status --porcelain &&     git checkout . && scripts/watermark.sh &&     git status --porcelain
 ---> Running in 84cf9c695d32
diff --git a/Dockerfile.bridge-local-git b/Dockerfile.bridge-local-git
index d93d44e..e7aa91d 100644
--- a/Dockerfile.bridge-local-git
+++ b/Dockerfile.bridge-local-git
@@ -1,4 +1,4 @@
-FROM docker/datakit:client
+FROM sha256:f8e83f07e52962236d9f46a2b41af3d3905c26ee8100ae4b8fc343d9c1197def
 
 RUN opam pin add github --dev -n
 RUN opam pin add datakit-github.dev /home/opam/src/datakit -n
 M Dockerfile.bridge-local-git
 M src/version.ml
 ---> 77ba2ac028a5
Removing intermediate container 84cf9c695d32
Step 11/17 : RUN opam update datakit-bridge-local-git
 ---> Running in 20e19a1ebd47

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
[datakit-bridge-local-git] /home/opam/src/datakit/ synchronized
 ---> 1a06adb1a815
Removing intermediate container 20e19a1ebd47
Step 12/17 : RUN opam install datakit-bridge-local-git -vv
 ---> Running in 6683e0991de5

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-bridge-local-git"
- sending incremental file list
- ./
- api/
- bridge/
- ci/
- ci/static/
- src/
- 
- sent 8,143 bytes  received 60 bytes  16,406.00 bytes/sec
- total size is 1,281,814  speedup is 156.26
[datakit-bridge-local-git] /home/opam/src/datakit/ synchronized
The following actions will be performed:
  - install datakit-bridge-local-git dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-bridge-local-git"
- sending incremental file list
- ./
- ci/
- 
- sent 8,131 bytes  received 48 bytes  16,358.00 bytes/sec
- total size is 1,281,814  speedup is 156.72
[datakit-bridge-local-git.dev] /home/opam/src/datakit/ synchronized

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: ocaml build] Command started
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "-n" "datakit-bridge-local-git" (CWD=/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev)
- ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/4.03.0/lib/ocamlbuild /home/opam/.opam/4.03.0/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/4.03.0/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
- ocamlfind ocamldep -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/local/main.ml > bridge/local/main.ml.depends
- ocamlfind ocamldep -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/local/main.mli > bridge/local/main.mli.depends
- ocamlfind ocamlc -c -g -annot -bin-annot -safe-string -strict-sequence -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -I bridge/local -o bridge/local/main.cmi bridge/local/main.mli
- ocamlfind ocamldep -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/local/sync.ml > bridge/local/sync.ml.depends
- ocamlfind ocamldep -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/local/sync.mli > bridge/local/sync.mli.depends
- ocamlfind ocamlc -c -g -annot -bin-annot -safe-string -strict-sequence -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -I bridge/local -o bridge/local/sync.cmi bridge/local/sync.mli
- ocamlfind ocamlopt -c -g -annot -bin-annot -safe-string -strict-sequence -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -I bridge/local -o bridge/local/sync.cmx bridge/local/sync.ml
- ocamlfind ocamlopt -c -g -annot -bin-annot -safe-string -strict-sequence -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -I bridge/local -o bridge/local/main.cmx bridge/local/main.ml
- ocamlfind ocamlopt -a -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' bridge/local/sync.cmx bridge/local/main.cmx -o bridge/local/datakit-bridge-local-git.cmxa
- ocamlfind ocamlopt -shared -linkall -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' bridge/local/datakit-bridge-local-git.cmxa -o bridge/local/datakit-bridge-local-git.cmxs
- ocamlfind ocamlc -c -g -annot -bin-annot -safe-string -strict-sequence -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -I bridge/local -o bridge/local/main.cmo bridge/local/main.ml
- ocamlfind ocamlc -c -g -annot -bin-annot -safe-string -strict-sequence -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -I bridge/local -o bridge/local/sync.cmo bridge/local/sync.ml
- ocamlfind ocamlc -a -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' bridge/local/sync.cmo bridge/local/main.cmo -o bridge/local/datakit-bridge-local-git.cma
- ocamlfind ocamlopt -linkpkg -g -package 'irmin.unix, irmin.git, irmin-watcher, datakit-github.client' -package 'cmdliner, logs, datakit-client, protocol-9p.unix, fmt.cli, fmt.tty, logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' bridge/local/sync.cmx bridge/local/main.cmx -o bridge/local/main.native
+ install "-m" "0755" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/main.native" "/home/opam/.opam/4.03.0/bin/datakit-bridge-local-git"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/datakit-bridge-local-git.a" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/datakit-bridge-local-git.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/datakit-bridge-local-git.cma" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/datakit-bridge-local-git.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/datakit-bridge-local-git.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/datakit-bridge-local-git.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/datakit-bridge-local-git.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/datakit-bridge-local-git.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/main.cmi" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/main.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/main.cmti" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/main.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/main.cmx" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/main.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/main.mli" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/main.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/sync.cmi" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/sync.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/sync.cmti" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/sync.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/sync.cmx" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/sync.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/bridge/local/sync.mli" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/sync.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/datakit-bridge-local-git.opam" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/pkg/META.bridge-local-git" "/home/opam/.opam/4.03.0/lib/datakit-bridge-local-git/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-bridge-local-git/CHANGES.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-bridge-local-git/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-bridge-local-git.dev/_build/README.md" "/home/opam/.opam/4.03.0/doc/datakit-bridge-local-git/README.md"
-> installed datakit-bridge-local-git.dev
Done.
 ---> 82625517f6f1
Removing intermediate container 6683e0991de5
Step 13/17 : RUN opam config exec -- ocaml /home/opam/src/datakit/check-libev.ml
 ---> Running in fe264fe7c380
 ---> 0e7ee9b16aea
Removing intermediate container fe264fe7c380
Step 14/17 : RUN sudo cp $(opam config exec -- which datakit-bridge-local-git) /usr/bin/
 ---> Running in cc2e57033506
 ---> 3f9672016fde
Removing intermediate container cc2e57033506
Step 15/17 : USER root
 ---> Running in 83cd76af6cac
 ---> b4be3de29fb6
Removing intermediate container 83cd76af6cac
Step 16/17 : ENTRYPOINT /usr/bin/datakit-bridge-local-git
 ---> Running in 2b2f79c0f4e9
 ---> fbf9ebd7a02d
Removing intermediate container 2b2f79c0f4e9
Step 17/17 : CMD -v --datakit=tcp:datakit:5640
 ---> Running in f02a4b2e8d58
 ---> 28f8efb6537f
Removing intermediate container f02a4b2e8d58
Successfully built 28f8efb6537f
[2017-02-09 14:38.50] Success
