=== Docker run test-datakit-ci
[2017-05-04 16:26.09] Starting...
[2017-05-04 16:26.09] Running "docker" "run" "--rm" "--user" "opam" "--entrypoint" "/bin/sh" "sha256:e2c2ab85f540d9c8adda4dc06cd5bc239420df22c8da83fcc2c406131b05b471" "-c" "opam remove -y \"datakit-ci\" && opam depext -i -y \"conf-autoconf\" \"conf-libpcre\" \"camlzip\"&& opam install -y -t --deps-only \"datakit-ci\" && opam install -y -v -t \"datakit-ci\""
The following actions will be performed:
  - remove datakit-ci dev*

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - autoconf
#  - m4
#  - pcre-dev
#  - pkgconfig
#  - zlib-dev
m4
pcre-dev
pkgconf
zlib-dev
# The following new OS packages need to be installed: autoconf
The following command needs to be run through "sudo":
    apk add autoconf
(1/1) Installing autoconf (2.69-r0)
Executing busybox-1.25.1-r0.trigger
OK: 645 MiB in 103 packages
# OS packages installation successful
# Now letting OPAM install the packages
[NOTE] Package camlzip is already installed (current version is 1.07).
The following actions will be performed:
  - install conf-pkg-config 1.0                                 [required by conf-libpcre]
  - install conf-autoconf   0.1
  - install conf-libpcre    1
===== 3 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed conf-autoconf.0.1
-> installed conf-pkg-config.1.0
-> installed conf-libpcre.1
Done.
# Run eval `opam env` to update the current shell environment

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-ci.dev] no changes from git+file:///home/opam/datakit#master

Nothing to do.
# Run eval `opam env` to update the current shell environment

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1:
Processing  1/1: [datakit-ci.dev: git]
[datakit-ci.dev] no changes from git+file:///home/opam/datakit#master

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/2: [datakit-ci: jbuilder build]
+ jbuilder "build" "-p" "datakit-ci" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-ci.dev)
-     ocamlopt default/ppx_sexp_conv/ppx.exe [.ppx]
- ocaml-crunch ci/src/cI_static.ml
- Generating cI_static.ml
- Skipping generation of .mli
-          ppx ci/src/cI_secrets.pp.mli
-          ppx ci/src/cI_web_utils.pp.mli
-          ppx ci/src/cI_secrets.pp.ml
-          ppx ci/src/cI_web_utils.pp.ml
-     ocamldep ci/src/datakit_ci.dependsi.ocamldep-output
-     ocamldep ci/src/datakit_ci.depends.ocamldep-output
-       ocamlc ci/src/cI_ACL.{cmi,cmti}
-       ocamlc ci/src/cI_char_stream.{cmi,cmti}
-       ocamlc ci/src/cI_form.{cmi,cmti}
-       ocamlc ci/src/cI_live_log.{cmi,cmti}
-       ocamlc ci/src/cI_log_reporter.{cmi,cmti}
-       ocamlc ci/src/cI_result.{cmi,cmti}
-       ocamlc ci/src/cI_secrets.{cmi,cmti}
-       ocamlc ci/src/cI_static.{cmi,cmti}
-       ocamlc ci/src/cI_target.{cmi,cmti}
-       ocamlc ci/src/cI_utils.{cmi,cmti}
-       ocamlc ci/src/datakit_ci.{cmi,cmti}
-       ocamlc ci/src/cI_ACL.{cmo,cmt}
-     ocamlopt ci/src/cI_ACL.{cmx,o}
-       ocamlc ci/src/cI_escape_parser.{cmi,cmti}
-       ocamlc ci/src/cI_char_stream.{cmo,cmt}
-     ocamlopt ci/src/cI_char_stream.{cmx,o}
-       ocamlc ci/src/cI_process.{cmi,cmti}
-       ocamlc ci/src/cI_log_reporter.{cmo,cmt}
-     ocamlopt ci/src/cI_log_reporter.{cmx,o}
-       ocamlc ci/src/cI_output.{cmi,cmti}
-       ocamlc ci/src/cI_static.{cmo,cmt}
-     ocamlopt ci/src/cI_static.{cmx,o}
-       ocamlc ci/src/cI_utils.{cmo,cmt}
-     ocamlopt ci/src/cI_utils.{cmx,o}
-       ocamlc ci/src/cI_form.{cmo,cmt}
-       ocamlc ci/src/cI_live_log.{cmo,cmt}
-       ocamlc ci/src/cI_result.{cmo,cmt}
-       ocamlc ci/src/cI_secrets.{cmo,cmt}
-       ocamlc ci/src/cI_target.{cmo,cmt}
-       ocamlc ci/src/cI_escape_parser.{cmo,cmt}
-     ocamlopt ci/src/cI_escape_parser.{cmx,o}
-       ocamlc ci/src/cI_process.{cmo,cmt}
-       ocamlc ci/src/cI_output.{cmo,cmt}
-       ocamlc ci/src/cI_history.{cmi,cmti}
-       ocamlc ci/src/cI_s.{cmi,cmo,cmt}
-     ocamlopt ci/src/cI_form.{cmx,o}
-     ocamlopt ci/src/cI_live_log.{cmx,o}
-     ocamlopt ci/src/cI_result.{cmx,o}
-     ocamlopt ci/src/cI_secrets.{cmx,o}
-     ocamlopt ci/src/cI_target.{cmx,o}
-       ocamlc ci/src/cI_history.{cmo,cmt}
-       ocamlc ci/src/cI_eval.{cmi,cmti}
-       ocamlc ci/src/cI_monitored_pool.{cmi,cmti}
-       ocamlc ci/src/cI_term.{cmi,cmti}
-     ocamlopt ci/src/cI_process.{cmx,o}
-     ocamlopt ci/src/cI_output.{cmx,o}
-       ocamlc ci/src/cI_eval.{cmo,cmt}
-       ocamlc ci/src/cI_monitored_pool.{cmo,cmt}
-       ocamlc ci/src/cI_git.{cmi,cmti}
-       ocamlc ci/src/cI_term.{cmo,cmt}
-       ocamlc ci/src/cI_cache.{cmi,cmti}
-       ocamlc ci/src/cI_engine.{cmi,cmti}
-     ocamlopt ci/src/cI_history.{cmx,o}
-     ocamlopt ci/src/cI_s.{cmx,o}
-       ocamlc ci/src/cI_docker.{cmi,cmti}
-       ocamlc ci/src/cI_cache.{cmo,cmt}
-       ocamlc ci/src/cI_git.{cmo,cmt}
-       ocamlc ci/src/cI_engine.{cmo,cmt}
-       ocamlc ci/src/cI_web_templates.{cmi,cmti}
-     ocamlopt ci/src/cI_eval.{cmx,o}
-     ocamlopt ci/src/cI_monitored_pool.{cmx,o}
-       ocamlc ci/src/cI_docker.{cmo,cmt}
-       ocamlc ci/src/cI_config.{cmi,cmti}
-       ocamlc ci/src/cI_web_utils.{cmi,cmti}
-       ocamlc ci/src/cI_web_templates.{cmo,cmt}
-     ocamlopt ci/src/cI_term.{cmx,o}
-       ocamlc ci/src/cI_config.{cmo,cmt}
-       ocamlc ci/src/cI_main.{cmi,cmti}
-       ocamlc ci/src/cI_web.{cmi,cmti}
-       ocamlc ci/src/cI_web_utils.{cmo,cmt}
-     ocamlopt ci/src/cI_cache.{cmx,o}
-     ocamlopt ci/src/cI_engine.{cmx,o}
-       ocamlc ci/src/datakit_ci.{cmo,cmt}
-       ocamlc ci/src/cI_web.{cmo,cmt}
-       ocamlc ci/src/cI_main.{cmo,cmt}
-     ocamlopt ci/src/cI_git.{cmx,o}
-     ocamlopt ci/src/cI_web_templates.{cmx,o}
-       ocamlc ci/src/datakit_ci.cma
-     ocamlopt ci/src/cI_docker.{cmx,o}
-     ocamlopt ci/src/cI_config.{cmx,o}
-     ocamlopt ci/src/cI_web_utils.{cmx,o}
-     ocamlopt ci/src/cI_web.{cmx,o}
-     ocamlopt ci/src/cI_main.{cmx,o}
-     ocamlopt ci/src/datakit_ci.{cmx,o}
-     ocamlopt ci/src/datakit_ci.{a,cmxa}
-     ocamlopt ci/src/datakit_ci.cmxs
Processing  1/2: [datakit-ci: jbuilder runtest]
+ jbuilder "runtest" "ci/tests" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-ci.dev)
-     ocamldep ci/tests/test_ci.depends.ocamldep-output
-     ocamldep ci/tests/test_ci.dependsi.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.dependsi.ocamldep-output
-     ocamldep src/datakit-github/datakit_github.dependsi.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.dependsi.ocamldep-output
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-     ocamldep src/datakit/datakit.dependsi.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.depends.ocamldep-output
-     ocamldep src/datakit/datakit.depends.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.depends.ocamldep-output
-     ocamldep src/datakit-github/datakit_github.depends.ocamldep-output
-       ocamlc api/ocaml/datakit_path.{cmi,cmti}
-       ocamlc src/datakit-io/datakit_io.{cmi,cmti}
-       ocamlc src/datakit-server/vfs.{cmi,cmti}
-       ocamlc api/ocaml/datakit_S.{cmi,cmo,cmt}
-       ocamlc src/datakit-server/fs9p.{cmi,cmti}
-       ocamlc src/datakit-server/fs9p_error.{cmi,cmti}
-     ocamlopt api/ocaml/datakit_path.{cmx,o}
-       ocamlc api/ocaml/datakit_client_9p.{cmi,cmti}
-       ocamlc src/datakit/ivfs_blob.{cmi,cmti}
-       ocamlc src/datakit/autopush.{cmi,cmo,cmt}
-     ocamlopt api/ocaml/datakit_S.{cmx,o}
-       ocamlc src/datakit-github/datakit_github.{cmi,cmti}
-     ocamlopt src/datakit-server/vfs.{cmx,o}
-     ocamlopt src/datakit-io/datakit_io.{cmx,o}
-       ocamlc src/datakit-github/datakit_github_conv.{cmi,cmti}
-       ocamlc src/datakit/ivfs_tree.{cmi,cmti}
-     ocamlopt src/datakit-io/datakit_io.{a,cmxa}
-     ocamlopt src/datakit-server/fs9p_error.{cmx,o}
-       ocamlc ci/src/cI_ACL.{cmi,cmti}
-       ocamlc ci/src/cI_result.{cmi,cmti}
-       ocamlc ci/src/cI_live_log.{cmi,cmti}
-       ocamlc ci/src/cI_char_stream.{cmi,cmti}
-       ocamlc ci/src/cI_target.{cmi,cmti}
-       ocamlc ci/src/cI_log_reporter.{cmi,cmti}
-       ocamlc ci/src/cI_utils.{cmi,cmti}
-       ocamlc ci/src/cI_secrets.{cmi,cmti}
-       ocamlc ci/src/cI_static.{cmi,cmti}
-       ocamlc ci/src/cI_form.{cmi,cmti}
-       ocamlc src/datakit/ivfs.{cmi,cmti}
-       ocamlc ci/src/datakit_ci.{cmi,cmti}
-       ocamlc src/datakit/ivfs_merge.{cmi,cmti}
-       ocamlc src/datakit/ivfs_remote.{cmi,cmti}
-       ocamlc src/datakit/ivfs_rw.{cmi,cmti}
-       ocamlc ci/src/cI_process.{cmi,cmti}
-       ocamlc ci/src/cI_escape_parser.{cmi,cmti}
-       ocamlc ci/src/cI_output.{cmi,cmti}
-     ocamlopt api/ocaml/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-       ocamlc ci/src/cI_history.{cmi,cmti}
-       ocamlc ci/src/cI_s.{cmi,cmo,cmt}
-       ocamlc ci/src/cI_monitored_pool.{cmi,cmti}
-       ocamlc ci/src/cI_eval.{cmi,cmti}
-       ocamlc ci/src/cI_term.{cmi,cmti}
-     ocamlopt src/datakit-server/fs9p.{cmx,o}
-       ocamlc ci/src/cI_git.{cmi,cmti}
-       ocamlc ci/src/cI_cache.{cmi,cmti}
-     ocamlopt src/datakit-server/datakit_server.{a,cmxa}
-       ocamlc ci/src/cI_engine.{cmi,cmti}
-       ocamlc ci/src/cI_docker.{cmi,cmti}
-     ocamlopt src/datakit/autopush.{cmx,o}
-     ocamlopt src/datakit/ivfs_blob.{cmx,o}
-       ocamlc ci/src/cI_web_templates.{cmi,cmti}
-       ocamlc ci/src/cI_config.{cmi,cmti}
-       ocamlc ci/src/cI_main.{cmi,cmti}
-     ocamlopt src/datakit/ivfs_tree.{cmx,o}
-       ocamlc ci/src/cI_web_utils.{cmi,cmti}
-     ocamlopt src/datakit/ivfs_rw.{cmx,o}
-     ocamlopt src/datakit/ivfs_merge.{cmx,o}
-     ocamlopt src/datakit/ivfs_remote.{cmx,o}
-       ocamlc ci/src/cI_web.{cmi,cmti}
-     ocamlopt src/datakit-github/datakit_github.{cmx,o}
-       ocamlc ci/tests/test_ci.{cmi,cmti}
-       ocamlc ci/tests/test_utils.{cmi,cmo,cmt}
-     ocamlopt src/datakit-github/datakit_github_conv.{cmx,o}
-     ocamlopt src/datakit-github/datakit_github.{a,cmxa}
-     ocamlopt src/datakit/ivfs.{cmx,o}
-     ocamlopt ci/src/cI_char_stream.{cmx,o}
-     ocamlopt ci/src/cI_ACL.{cmx,o}
-     ocamlopt src/datakit/datakit.{a,cmxa}
-     ocamlopt ci/src/cI_log_reporter.{cmx,o}
-     ocamlopt ci/src/cI_escape_parser.{cmx,o}
-     ocamlopt ci/src/cI_utils.{cmx,o}
-     ocamlopt ci/src/cI_result.{cmx,o}
-     ocamlopt ci/src/cI_static.{cmx,o}
-     ocamlopt ci/src/cI_live_log.{cmx,o}
-     ocamlopt ci/src/cI_target.{cmx,o}
-     ocamlopt ci/src/cI_secrets.{cmx,o}
-     ocamlopt ci/src/cI_process.{cmx,o}
-     ocamlopt ci/src/cI_output.{cmx,o}
-     ocamlopt ci/src/cI_form.{cmx,o}
-     ocamlopt ci/src/cI_s.{cmx,o}
-     ocamlopt ci/src/cI_monitored_pool.{cmx,o}
-     ocamlopt ci/src/cI_eval.{cmx,o}
-     ocamlopt ci/src/cI_history.{cmx,o}
-     ocamlopt ci/src/cI_term.{cmx,o}
-     ocamlopt ci/src/cI_cache.{cmx,o}
-     ocamlopt ci/src/cI_engine.{cmx,o}
-     ocamlopt ci/src/cI_git.{cmx,o}
-     ocamlopt ci/src/cI_docker.{cmx,o}
-     ocamlopt ci/src/cI_web_templates.{cmx,o}
-     ocamlopt ci/src/cI_config.{cmx,o}
-     ocamlopt ci/src/cI_web_utils.{cmx,o}
-     ocamlopt ci/src/cI_web.{cmx,o}
-     ocamlopt ci/src/cI_main.{cmx,o}
-     ocamlopt ci/src/datakit_ci.{cmx,o}
-     ocamlopt ci/src/datakit_ci.{a,cmxa}
-     ocamlopt ci/tests/test_utils.{cmx,o}
-     ocamlopt ci/tests/test_ci.{cmx,o}
-     ocamlopt ci/tests/test_ci.exe
-      test_ci alias ci/tests/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit-ci.
-  ...                ci          0   Simple.[OK]                ci          0   Simple.
-  ...                ci          1   Branch.[OK]                ci          1   Branch.
-  ...                ci          2   Circle rebuild.[OK]                ci          2   Circle rebuild.
-  ...                ci          3   Logs.[OK]                ci          3   Logs.
-  ...                ci          4   Cancel.[OK]                ci          4   Cancel.
-  ...                ci          5   Cache (disk).[OK]                ci          5   Cache (disk).
-  ...                ci          6   Cache (memory).[OK]                ci          6   Cache (memory).
-  ...                ci          7   Test pending.[OK]                ci          7   Test pending.
-  ...                ci          8   Git.[OK]                ci          8   Git.
-  ...                ci          9   Git (clone).[OK]                ci          9   Git (clone).
-  ...                ci         10   Git tag.[OK]                ci         10   Git tag.
-  ...                ci         11   Cross-project.[OK]                ci         11   Cross-project.
-  ...                ci         12   Auth.[OK]                ci         12   Auth.
-  ...                ci         13   Roles.[OK]                ci         13   Roles.
-  ...                ci         14   Live logs.[OK]                ci         14   Live logs.
-  ...                ci         15   History.[OK]                ci         15   History.
-  ...                ci         16   Process.[OK]                ci         16   Process.
- The full test results are available in `_build/_tests`.
- Test Successful in 0.316s. 17 tests run.
-> compiled  datakit-ci.dev
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
[2017-05-04 16:27.13] Success
