=== Docker build Dockerfile.ci
[2017-05-04 18:24.12] Starting...
Cloning into '/tmp/with_clone359ceac2'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 0f947be Dockerfile: fix installation of dependencies
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.701 MB
Step 1/18 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/18 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 20061f41087f
Step 3/18 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> c9c160bcf357
Step 4/18 : RUN opam pin add hvsock.0.14.0 -n https://github.com/mirage/ocaml-hvsock.git#88397c37a910c61507a9655ed8413c1692294da0
 ---> Using cache
 ---> d7f99e2dde67
Step 5/18 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 0a767c1dcced
Step 6/18 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> d407611488be
Step 7/18 : RUN opam pin add irmin-unix.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 2effcead53b8
Step 8/18 : RUN opam pin add -yn protocol-9p.0.10.0 'https://github.com/talex5/ocaml-9p.git#ping-0.10.0'
 ---> Using cache
 ---> a0149acd9007
Step 9/18 : RUN opam depext -i asl win-eventlog camlzip alcotest mtime mirage-flow hvsock git irmin irmin-unix lwt protocol-9p tyxml redis multipart-form-data pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner webmachine
 ---> Using cache
 ---> 197279180443
Step 10/18 : RUN opam install irmin-unix alcotest
 ---> Using cache
 ---> 8f7f95e9c58d
Step 11/18 : ADD . /home/opam/datakit
 ---> 1cdcad59da8a
Removing intermediate container ba3bd7a30d9b
Step 12/18 : RUN sudo chown opam /home/opam/datakit
 ---> Running in b52db69bca26
 ---> 87a924fcf443
Removing intermediate container b52db69bca26
Step 13/18 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in d92173f7784f
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install protocol-9p-unix 0.10.0                             [required by datakit-client]
  - install datakit-client   dev*
===== 2 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[protocol-9p-unix.0.10.0] downloaded from https://github.com/mirage/ocaml-9p/archive/v0.10.0.tar.gz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed protocol-9p-unix.0.10.0
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 6f5a88a486a9
Error removing intermediate container d92173f7784f: Driver aufs failed to remove root filesystem d92173f7784f4517db4513e5400ef960b7d18c94a7c5e64e3cbf152695e4553d: rename /var/lib/docker/aufs/mnt/b3b978c84414e148ad9758c39548fe83ca9fea48d9dbdad169414ba73d3d59d5 /var/lib/docker/aufs/mnt/b3b978c84414e148ad9758c39548fe83ca9fea48d9dbdad169414ba73d3d59d5-removing: device or resource busy
Step 14/18 : RUN opam pin add -k git datakit-server.dev /home/opam/datakit -y
 ---> Running in 6230288e72da
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev*
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> ef8d752c3cb3
Removing intermediate container 6230288e72da
Error removing intermediate container d92173f7784f: No such container: d92173f7784f4517db4513e5400ef960b7d18c94a7c5e64e3cbf152695e4553d
Step 15/18 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in 9479924d75c8
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 2008aaa4b5ef
Error removing intermediate container d92173f7784f: No such container: d92173f7784f4517db4513e5400ef960b7d18c94a7c5e64e3cbf152695e4553d
Step 16/18 : RUN opam pin add -k git datakit.dev /home/opam/datakit -y
 ---> Running in 38cd7827b742
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit dev*
[datakit.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> b1072f9bb2db
Error removing intermediate container d92173f7784f: No such container: d92173f7784f4517db4513e5400ef960b7d18c94a7c5e64e3cbf152695e4553d
Step 17/18 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in b1c364fb0f7a
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 55855662c479
Removing intermediate container 9479924d75c8
Removing intermediate container 38cd7827b742
Removing intermediate container b1c364fb0f7a
Error removing intermediate container d92173f7784f: No such container: d92173f7784f4517db4513e5400ef960b7d18c94a7c5e64e3cbf152695e4553d
Step 18/18 : VOLUME /secrets
 ---> Running in f6b5cabf7bb0
 ---> 8e99c457b25f
Error removing intermediate container d92173f7784f: No such container: d92173f7784f4517db4513e5400ef960b7d18c94a7c5e64e3cbf152695e4553d
Successfully built 8e99c457b25f
[2017-05-04 18:25.51] Success
