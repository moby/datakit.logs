=== Docker build Dockerfile
[2018-12-14 07:57.52] Starting...
Cloning into '/tmp/with_clone2e15c2f9'...
done.
HEAD is now at f13a87b circleci: update to v2.0
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.551 MBSending build context to Docker daemon 5.551 MB
Step 1/22 : FROM ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
alpine-3.5_ocaml-4.05.0: Pulling from ocaml/opam-dev
Digest: sha256:56eabc77608dac440c0907a0d3d3c2fbff0d65141b20dc5296783c21d42310d3
Status: Image is up to date for ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
 ---> 1b9232af4c8c
Step 2/22 : RUN sudo apk add --no-cache tzdata aspcud gmp-dev perl libev-dev m4
 ---> Using cache
 ---> 04e887bc34dd
Step 3/22 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> edf1e303d39f
Step 4/22 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 818ebb219 --hard &&     opam update -u
 ---> Using cache
 ---> 1a429c79664c
Step 5/22 : RUN opam install alcotest lwt conf-libev inotify
 ---> Using cache
 ---> 06d3bb9fe621
Step 6/22 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> a5aeaf46d782
Step 7/22 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 6137cd319906
Step 8/22 : COPY *.opam /home/opam/src/datakit/
 ---> b4e65918fa61
Removing intermediate container be868252bb9a
Step 9/22 : RUN opam pin add /home/opam/src/datakit/ -n
 ---> Running in 659ef7e43603
This will pin the following packages: datakit, datakit-server, datakit-server-9p, datakit-github, datakit-client, datakit-client-git, datakit-client-9p, datakit-ci, datakit-bridge-local-git, datakit-bridge-github. Continue ? [Y/n] y
[datakit.0.12.0: rsync]
[datakit.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta5
[0mdatakit is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-server.0.12.0: rsync]
[datakit-server.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta5
[0mdatakit-server is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-server-9p.0.12.0: rsync]
[datakit-server-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta5
[0mdatakit-server-9p is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-github.0.12.0: rsync]
[datakit-github.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta5
[0mdatakit-github is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-client.0.12.0: rsync]
[datakit-client.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta5
[0mdatakit-client is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-client-git.0.12.0: rsync]
[datakit-client-git.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-client-git/datakit-client-git.opam from 1.2 to 2.0~beta5
[0mdatakit-client-git is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-client-9p.0.12.0: rsync]
[datakit-client-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta5
[0mdatakit-client-9p is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-ci.0.12.1: rsync]
[datakit-ci.0.12.1] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta5
[0mdatakit-ci is now pinned to file:///home/opam/src/datakit (version 0.12.1)
[datakit-bridge-local-git.0.12.0: rsync]
[datakit-bridge-local-git.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-bridge-local-git/datakit-bridge-local-git.opam from 1.2 to 2.0~beta5
[0mdatakit-bridge-local-git is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-bridge-github.0.12.0: rsync]
[datakit-bridge-github.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-bridge-github/datakit-bridge-github.opam from 1.2 to 2.0~beta5
[0mdatakit-bridge-github is now pinned to file:///home/opam/src/datakit (version 0.12.0)
 ---> fb33460bd3ea
Removing intermediate container 659ef7e43603
Step 10/22 : RUN opam install datakit --deps -t
 ---> Running in 9216b3107aed

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.0.12.0] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install   re                      1.7.3                            
  - install   ocaml-migrate-parsetree 1.0.10         [required by lwt] 
  - install   rresult                 0.5.0                            
  - install   mirage-flow             1.3.0                            
  - install   mirage-device           1.1.0                            
  - install   ocb-stubblr             0.1.1                            
  - install   base-num                base                             
  - install   mtime                   1.1.0                            
  - install   stringext               1.5.0                            
  - install   magic-mime              1.1.0                            
  - install   win-error               0.2                              
  - install   decompress              0.7                              
  - install   fpath                   0.7.2                            
  - install   ppx_tools               5.0+4.05.0                       
  - install   ocamlgraph              1.8.8                            
  - install   asetmap                 0.8.1                            
  - install   ocaml-compiler-libs     v0.11.0                          
  - install   sexplib0                v0.11.0                          
  - install   ocplib-endian           1.0                              
  - install   duration                0.1.1                            
  - install   ppx_derivers            1.0                              
  - install   base64                  2.2.0                            
  - install   ppx_tools_versioned     5.1            [required by lwt] 
  - install   mirage-channel          3.1.0                            
  - install   mirage-time             1.1.0                            
  - install   mirage-kv               1.1.1                            
  - install   mirage-clock            1.3.0                            
  - install   num                     0                                
  - install   parsexp                 v0.11.0                          
  - install   base                    v0.11.0                          
  - downgrade lwt                     4.0.1 to 3.3.0                   For the PPX, please install package lwt_ppx
                                                                       For Lwt_log and Lwt_daemon, please install package lwt_log
  - install   sexplib                 v0.11.0                          
  - install   stdio                   v0.11.0                          
  - install   prometheus              0.5                              
  - install   named-pipe              0.4.0                            
  - install   mirage-time-lwt         1.1.0                            
  - install   logs                    0.6.2                            
  - recompile inotify                 2.3            [uses lwt]        
  - install   cstruct                 3.2.1                            
  - install   ppxlib                  0.2.0                            
  - install   configurator            v0.11.0                          
  - install   win-eventlog            0.1                              
  - install   bos                     0.2.0                            
  - install   asl                     0.11                             
  - install   irmin-watcher           0.3.0                            
  - install   mstruct                 1.4.0                            
  - install   mirage-kv-lwt           1.1.0                            
  - install   mirage-flow-lwt         1.4.0                            
  - install   hex                     1.2.0                            
  - install   datakit-server          0.12.0*                          
  - install   datakit-client          0.12.0*                          
  - install   cstruct-lwt             3.2.1                            
  - install   ppx_type_conv           v0.11.0                          
  - install   ppx_sexp_conv           v0.11.0                          
  - install   fieldslib               v0.11.0                          
  - install   io-page                 2.0.1                            
  - install   hvsock                  1.0.1                            
  - install   uri                     1.9.6                            
  - install   ipaddr                  2.8.0                            
  - install   ppx_fields_conv         v0.11.0                          
  - install   mirage-channel-lwt      3.1.0                            
  - install   io-page-unix            2.0.1                            
  - install   irmin                   1.3.2                            
  - install   git                     1.11.5                           
  - install   conduit                 1.1.0                            
  - install   cohttp                  1.1.0                            
  - install   protocol-9p             0.12.0                           
  - install   irmin-mem               1.3.0                            
  - install   irmin-git               1.3.0                            
  - install   conduit-lwt             1.1.0                            
  - install   cohttp-lwt              1.0.2                            
  - install   protocol-9p-unix        0.12.0                           
  - install   datakit-server-9p       0.12.0*                          
  - install   conduit-lwt-unix        1.1.0                            
  - install   datakit-client-9p       0.12.0*                          
  - install   cohttp-lwt-unix         1.0.2                            
  - install   prometheus-app          0.5                              
===== 75 to install | 1 to recompile | 1 to downgrade =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asetmap.0.8.1] downloaded from http://erratique.ch/software/asetmap/releases/asetmap-0.8.1.tbz
[asl.0.11] downloaded from https://github.com/mirage/ocaml-asl/releases/download/0.11/asl-0.11.tbz
[base64.2.2.0] downloaded from https://github.com/mirage/ocaml-base64/releases/download/v2.2.0/base64-2.2.0.tbz
[base.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/base-v0.11.0.tar.gz
[bos.0.2.0] downloaded from http://erratique.ch/software/bos/releases/bos-0.2.0.tbz
[cohttp.1.1.0] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v1.1.0/cohttp-1.1.0.tbz
[cohttp-lwt-unix.1.0.2] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v1.0.2/cohttp-1.0.2.tbz
[cohttp-lwt.1.0.2] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v1.0.2/cohttp-1.0.2.tbz
[conduit.1.1.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.1.0/conduit-1.1.0.tbz
[conduit-lwt.1.1.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.1.0/conduit-1.1.0.tbz
[conduit-lwt-unix.1.1.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.1.0/conduit-1.1.0.tbz
[configurator.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/configurator-v0.11.0.tar.gz
[cstruct-lwt.3.2.1] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v3.2.1/cstruct-3.2.1.tbz
[cstruct.3.2.1] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v3.2.1/cstruct-3.2.1.tbz
[decompress.0.7] downloaded from https://github.com/mirage/decompress/releases/download/v0.7/decompress-0.7.tbz
[fpath.0.7.2] downloaded from http://erratique.ch/software/fpath/releases/fpath-0.7.2.tbz
[fieldslib.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/fieldslib-v0.11.0.tar.gz
[duration.0.1.1] downloaded from https://github.com/hannesm/duration/releases/download/0.1.1/duration-0.1.1.tbz
[hex.1.2.0] downloaded from https://github.com/mirage/ocaml-hex/releases/download/v1.2.0/hex-1.2.0.tbz
[inotify.2.3] found in cache
[git.1.11.5] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.5/git-1.11.5.tbz
[hvsock.1.0.1] downloaded from https://github.com/mirage/ocaml-hvsock/releases/download/1.0.1/hvsock-1.0.1.tbz
[io-page.2.0.1] downloaded from https://github.com/mirage/io-page/releases/download/2.0.1/io-page-2.0.1.tbz
[io-page-unix.2.0.1] downloaded from https://github.com/mirage/io-page/releases/download/2.0.1/io-page-2.0.1.tbz
[ipaddr.2.8.0] downloaded from https://github.com/mirage/ocaml-ipaddr/releases/download/2.8.0/ipaddr-2.8.0.tbz
[irmin.1.3.2] downloaded from https://github.com/mirage/irmin/releases/download/1.3.2/irmin-1.3.2.tbz
[irmin-git.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[logs.0.6.2] downloaded from http://erratique.ch/software/logs/releases/logs-0.6.2.tbz
[irmin-mem.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[irmin-watcher.0.3.0] downloaded from https://github.com/mirage/irmin-watcher/releases/download/0.3.0/irmin-watcher-0.3.0.tbz
[magic-mime.1.1.0] downloaded from https://github.com/mirage/ocaml-magic-mime/releases/download/v1.1.0/magic-mime-1.1.0.tbz
[lwt.3.3.0] downloaded from https://github.com/ocsigen/lwt/archive/3.3.0.tar.gz
[mirage-channel.3.1.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.1.0/mirage-channel-3.1.0.tbz
[mirage-channel-lwt.3.1.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.1.0/mirage-channel-3.1.0.tbz
[mirage-clock.1.3.0] downloaded from https://github.com/mirage/mirage-clock/releases/download/v1.3.0/mirage-clock-1.3.0.tbz
[mirage-device.1.1.0] downloaded from https://github.com/mirage/mirage-device/releases/download/v1.1.0/mirage-device-1.1.0.tbz
[mirage-flow-lwt.1.4.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.4.0/mirage-flow-1.4.0.tbz
[mirage-flow.1.3.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.3.0/mirage-flow-1.3.0.tbz
[mirage-kv.1.1.1] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.1/mirage-kv-1.1.1.tbz
[mirage-kv-lwt.1.1.0] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.0/mirage-kv-1.1.0.tbz
[mirage-time.1.1.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.1.0/mirage-time-1.1.0.tbz
[mtime.1.1.0] downloaded from http://erratique.ch/software/mtime/releases/mtime-1.1.0.tbz
[mirage-time-lwt.1.1.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.1.0/mirage-time-1.1.0.tbz
[mstruct.1.4.0] downloaded from https://github.com/mirage/ocaml-mstruct/releases/download/v1.4.0/mstruct-1.4.0.tbz
[ocaml-compiler-libs.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/ocaml-compiler-libs-v0.11.0.tar.gz
[named-pipe.0.4.0] downloaded from https://github.com/mirage/ocaml-named-pipe/releases/download/0.4.0/named-pipe-0.4.0.tbz
[ocb-stubblr.0.1.1] downloaded from https://github.com/pqwy/ocb-stubblr/releases/download/v0.1.1/ocb-stubblr-0.1.1.tbz
[ocaml-migrate-parsetree.1.0.10] downloaded from https://github.com/ocaml-ppx/ocaml-migrate-parsetree/archive/v1.0.10.tar.gz
[parsexp.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/parsexp-v0.11.0.tar.gz
[ocplib-endian.1.0] downloaded from https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz
[ocamlgraph.1.8.8] downloaded from http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.8.tar.gz
[ppx_fields_conv.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/ppx_fields_conv-v0.11.0.tar.gz
[ppx_sexp_conv.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/ppx_sexp_conv-v0.11.0.tar.gz
[ppx_derivers.1.0] downloaded from https://github.com/diml/ppx_derivers/archive/1.0.tar.gz
[ppx_type_conv.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/ppx_type_conv-v0.11.0.tar.gz
[ppx_tools.5.0+4.05.0] downloaded from https://github.com/ocaml-ppx/ppx_tools/archive/5.0+4.05.0.tar.gz
[ppx_tools_versioned.5.1] downloaded from https://github.com/ocaml-ppx/ppx_tools_versioned/archive/5.1.tar.gz
[prometheus.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[prometheus-app.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[ppxlib.0.2.0] downloaded from https://github.com/ocaml-ppx/ppxlib/releases/download/0.2.0/ppxlib-0.2.0.tbz
[protocol-9p-unix.0.12.0] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v0.12.0/protocol-9p-0.12.0.tbz
[rresult.0.5.0] downloaded from http://erratique.ch/software/rresult/releases/rresult-0.5.0.tbz
[re.1.7.3] downloaded from https://github.com/ocaml/ocaml-re/releases/download/1.7.3/re-1.7.3.tbz
[protocol-9p.0.12.0] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v0.12.0/protocol-9p-0.12.0.tbz
[sexplib.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/sexplib-v0.11.0.tar.gz
[sexplib0.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/sexplib0-v0.11.0.tar.gz
[stdio.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/stdio-v0.11.0.tar.gz
[stringext.1.5.0] downloaded from https://github.com/rgrinberg/stringext/archive/1.5.0.zip
[uri.1.9.6] downloaded from https://github.com/mirage/ocaml-uri/releases/download/v1.9.6/uri-1.9.6.tbz
[win-error.0.2] downloaded from https://github.com/djs55/ocaml-win-error/archive/v0.2.tar.gz
[win-eventlog.0.1] downloaded from https://github.com/djs55/ocaml-win-eventlog/archive/v0.1.tar.gz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   inotify.2.3
-> removed   lwt.4.0.1
-> installed asetmap.0.8.1
-> installed base-num.base
-> installed base64.2.2.0
-> installed decompress.0.7
-> installed duration.0.1.1
-> installed fpath.0.7.2
-> installed magic-mime.1.1.0
-> installed mirage-device.1.1.0
-> installed mirage-clock.1.3.0
-> installed mirage-flow.1.3.0
-> installed mirage-channel.3.1.0
-> installed mirage-kv.1.1.1
-> installed mirage-time.1.1.0
-> installed mtime.1.1.0
-> installed num.0
-> installed ocaml-compiler-libs.v0.11.0
-> installed ocaml-migrate-parsetree.1.0.10
-> installed ocamlgraph.1.8.8
-> installed ocb-stubblr.0.1.1
-> installed ocplib-endian.1.0
-> installed ppx_derivers.1.0
-> installed ppx_tools.5.0+4.05.0
-> installed ppx_tools_versioned.5.1
-> installed lwt.3.3.0
-> installed inotify.2.3
-> installed logs.0.6.2
-> installed asl.0.11
-> installed irmin-watcher.0.3.0
-> installed mirage-time-lwt.1.1.0
-> installed named-pipe.0.4.0
-> installed re.1.7.3
-> installed prometheus.0.5
-> installed rresult.0.5.0
-> installed bos.0.2.0
-> installed sexplib0.v0.11.0
-> installed base.v0.11.0
-> installed parsexp.v0.11.0
-> installed sexplib.v0.11.0
-> installed cstruct.3.2.1
-> installed cstruct-lwt.3.2.1
-> installed datakit-client.0.12.0
-> installed datakit-server.0.12.0
-> installed hex.1.2.0
-> installed mirage-flow-lwt.1.4.0
-> installed hvsock.1.0.1
-> installed mirage-kv-lwt.1.1.0
-> installed mstruct.1.4.0
-> installed stdio.v0.11.0
-> installed configurator.v0.11.0
-> installed io-page.2.0.1
-> installed io-page-unix.2.0.1
-> installed mirage-channel-lwt.3.1.0
-> installed ppxlib.0.2.0
-> installed fieldslib.v0.11.0
-> installed ppx_fields_conv.v0.11.0
-> installed ppx_sexp_conv.v0.11.0
-> installed ipaddr.2.8.0
-> installed ppx_type_conv.v0.11.0
-> installed stringext.1.5.0
-> installed uri.1.9.6
-> installed cohttp.1.1.0
-> installed cohttp-lwt.1.0.2
-> installed conduit.1.1.0
-> installed conduit-lwt.1.1.0
-> installed conduit-lwt-unix.1.1.0
-> installed cohttp-lwt-unix.1.0.2
-> installed git.1.11.5
-> installed irmin.1.3.2
-> installed irmin-git.1.3.0
-> installed irmin-mem.1.3.0
-> installed prometheus-app.0.5
-> installed win-error.0.2
-> installed protocol-9p.0.12.0
-> installed datakit-server-9p.0.12.0
-> installed protocol-9p-unix.0.12.0
-> installed datakit-client-9p.0.12.0
-> installed win-eventlog.0.1
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 747d782e48e2
Removing intermediate container 9216b3107aed
Step 11/22 : COPY . /home/opam/src/datakit
 ---> e4ac7b7c1d0b
Removing intermediate container e64f8abcedcf
Step 12/22 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in f06e4ff45a8b
 ---> 37d23bacfed3
Removing intermediate container f06e4ff45a8b
Step 13/22 : RUN opam update --dev && opam upgrade
 ---> Running in 601a1d5bbf27

=-=- Synchronising development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-ci.0.12.1] synchronised from file:///home/opam/src/datakit
[datakit-client.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit.bak
[datakit-bridge-github] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-bridge-github (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-bridge-github.bak
[datakit-bridge-local-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-ci] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-9p] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-github] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server-9p] Installing new package description from upstream file:///home/opam/src/datakit
Now run 'opam upgrade' to apply any package updates.
The following actions will be performed:
  - recompile datakit-server    0.12.0* [upstream changes]
  - recompile datakit-client    0.12.0* [upstream changes]
  - recompile datakit-server-9p 0.12.0* [upstream changes]
  - recompile datakit-client-9p 0.12.0* [upstream changes]
===== 4 to recompile =====

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-client-9p.0.12.0
-> removed   datakit-client.0.12.0
-> removed   datakit-server-9p.0.12.0
-> removed   datakit-server.0.12.0
-> installed datakit-client.0.12.0
-> installed datakit-client-9p.0.12.0
-> installed datakit-server.0.12.0
-> installed datakit-server-9p.0.12.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 6863326ac003
Removing intermediate container 601a1d5bbf27
Step 14/22 : RUN opam install datakit -ytv
 ---> Running in c46484b30520

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit.0.12.0: rsync]
[datakit.0.12.0] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit 0.12.0* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/2: [datakit: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "datakit" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit.0.12.0)
Processing  1/2: [datakit: jbuilder runtest]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "runtest" "tests/datakit" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit.0.12.0)
-         test alias tests/datakit/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit.
- [33m ...[m                [36mserver[m           0   Writes.[32m[OK][m                [36mserver[m           0   Writes.
- [33m ...[m                [36mserver[m           1   RW.[32m[OK][m                [36mserver[m           1   RW.
- [33m ...[m                [36mserver[m           2   Blobs fast.[32m[OK][m                [36mserver[m           2   Blobs fast.
- [33m ...[m                [36mserver[m           3   Blobs random.[32m[OK][m                [36mserver[m           3   Blobs random.
- [33m ...[m                [36mserver[m           4   Streams.[32m[OK][m                [36mserver[m           4   Streams.
- [33m ...[m                [36mconduit[m          0   basic.[32m[OK][m                [36mconduit[m          0   basic.
- The full test results are available in `_build/_tests`.
- [32mTest Successful[m in 0.004s. 6 tests run.
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "runtest" "tests/datakit-9p" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit.0.12.0)
-         test alias tests/datakit-9p/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit-9p.
- [33m ...[m                [36mserver[m          0   Transaction.[32m[OK][m                [36mserver[m          0   Transaction.
- [33m ...[m                [36mserver[m          1   Qids.[32m[OK][m                [36mserver[m          1   Qids.
- [33m ...[m                [36mserver[m          2   Watch.[32m[OK][m                [36mserver[m          2   Watch.
- [33m ...[m                [36mserver[m          3   Range.[32m[OK][m                [36mserver[m          3   Range.
- [33m ...[m                [36mserver[m          4   Rename branch.[32m[OK][m                [36mserver[m          4   Rename branch.
- [33m ...[m                [36mserver[m          5   Rename file.[32m[OK][m                [36mserver[m          5   Rename file.
- [33m ...[m                [36mserver[m          6   Truncate.[32m[OK][m                [36mserver[m          6   Truncate.
- [33m ...[m                [36mserver[m          7   Parents.[32m[OK][m                [36mserver[m          7   Parents.
- [33m ...[m                [36mserver[m          8   Merge.[32m[OK][m                [36mserver[m          8   Merge.
- [33m ...[m                [36mserver[m          9   Merge_metadata.[32m[OK][m                [36mserver[m          9   Merge_metadata.
- [33m ...[m                [36mserver[m         10   Merge empty.[32m[OK][m                [36mserver[m         10   Merge empty.
- [33m ...[m                [36mserver[m         11   Conflicts.[32m[OK][m                [36mserver[m         11   Conflicts.
- [33m ...[m                [36mserver[m         12   Stable inodes.[32m[OK][m                [36mserver[m         12   Stable inodes.
- [33m ...[m                [36mserver[m         13   Remotes.[33m[SKIP][m              [36mserver[m         13   Remotes.
- [33m ...[m                [36mserver[m         14   Debug.[32m[OK][m                [36mserver[m         14   Debug.
- [33m ...[m                [36mclient[m          0   Transaction.[32m[OK][m                [36mclient[m          0   Transaction.
- [33m ...[m                [36mclient[m          1   Watch.[32m[OK][m                [36mclient[m          1   Watch.
- [33m ...[m                [36mclient[m          2   Make dirs.[32m[OK][m                [36mclient[m          2   Make dirs.
- [33m ...[m                [36mclient[m          3   Truncate.[32m[OK][m                [36mclient[m          3   Truncate.
- [33m ...[m                [36mclient[m          4   Parents.[32m[OK][m                [36mclient[m          4   Parents.
- [33m ...[m                [36mclient[m          5   Merge.[32m[OK][m                [36mclient[m          5   Merge.
- [33m ...[m                [36mclient[m          6   Diff.[32m[OK][m                [36mclient[m          6   Diff.
- [33m ...[m                [36mclient[m          7   Merge_metadata.[32m[OK][m                [36mclient[m          7   Merge_metadata.
- [33m ...[m                [36mclient[m          8   Merge empty.[32m[OK][m                [36mclient[m          8   Merge empty.
- [33m ...[m                [36mclient[m          9   Conflicts.[32m[OK][m                [36mclient[m          9   Conflicts.
- [33m ...[m                [36mclient[m         10   Large write.[32m[OK][m                [36mclient[m         10   Large write.
- [33m ...[m                [36mclient[m         11   Remove.[32m[OK][m                [36mclient[m         11   Remove.
- [33m ...[m                [36mclient[m         12   Remotes.[33m[SKIP][m              [36mclient[m         12   Remotes.
- [33m ...[m                [36mclient[m         13   Create_or_replace.[33m[SKIP][m              [36mclient[m         13   Create_or_replace.
- The full test results are available in `_build/_tests`.
- [32mTest Successful[m in 0.268s. 26 tests run.
-> compiled  datakit.0.12.0
-> installed datakit.0.12.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> ca5f5d70b7cd
Removing intermediate container c46484b30520
Step 15/22 : RUN sudo cp $(opam config exec -- which datakit) /usr/bin/datakit &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in 99fe8b7d77e0
 ---> c62849f19afd
Removing intermediate container 99fe8b7d77e0
Step 16/22 : FROM alpine:3.5
3.5: Pulling from library/alpine
Digest: sha256:b9f282308e8a557a5d8941e6515bc8fa840586ec59dd6284ba1f1e6c81654020
Status: Image is up to date for alpine:3.5
 ---> dc496f71dbb5
Step 17/22 : RUN apk add --no-cache libev gmp tzdata ca-certificates git openssh-client bash
 ---> Running in 6b26186525fe
fetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz
(1/15) Installing ncurses-terminfo-base (6.0_p20171125-r1)
(2/15) Installing ncurses-terminfo (6.0_p20171125-r1)
(3/15) Installing ncurses-libs (6.0_p20171125-r1)
(4/15) Installing readline (6.3.008-r4)
(5/15) Installing bash (4.3.46-r5)
Executing bash-4.3.46-r5.post-install
(6/15) Installing ca-certificates (20161130-r1)
(7/15) Installing libssh2 (1.7.0-r2)
(8/15) Installing libcurl (7.61.1-r1)
(9/15) Installing expat (2.2.0-r1)
(10/15) Installing pcre (8.39-r0)
(11/15) Installing git (2.11.3-r2)
(12/15) Installing gmp (6.1.1-r0)
(13/15) Installing libev (4.22-r0)
(14/15) Installing openssh-client (7.4_p1-r2)
(15/15) Installing tzdata (2016i-r0)
Executing busybox-1.25.1-r2.trigger
Executing ca-certificates-20161130-r1.trigger
OK: 38 MiB in 26 packages
 ---> 8f2ebbe49993
Removing intermediate container 6b26186525fe
Step 18/22 : EXPOSE 5640
 ---> Running in f67918694337
 ---> 30d95ef37ed4
Removing intermediate container f67918694337
Step 19/22 : ENTRYPOINT /usr/bin/datakit
 ---> Running in 28d46e6217dd
 ---> 4a04edd29c45
Removing intermediate container 28d46e6217dd
Step 20/22 : CMD --url=tcp://0.0.0.0:5640 --git=/data -v
 ---> Running in ee09ec962d33
 ---> 275133c75f85
Removing intermediate container ee09ec962d33
Step 21/22 : COPY --from=0 /usr/bin/datakit /usr/bin/datakit
 ---> 1bebe686a290
Removing intermediate container 96d3d5e93bd3
Step 22/22 : COPY --from=0 /usr/bin/datakit-mount /usr/bin/datakit-mount
 ---> 5d2d3881ae40
Removing intermediate container 14343b4ff87b
Successfully built 5d2d3881ae40
[2018-12-14 08:08.08] Success
