=== Docker build Dockerfile.client
[2017-05-02 09:38.37] Starting...
Cloning into '/tmp/with_clone24243687'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at b450d04 Merge pull request #285 from samoht/master
[2017-05-02 09:38.40] Rewrite Dockerfile's first line to:
FROM ocaml/opam:alpine_ocaml-4.03.0
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 4.655 MB
Step 1/14 : FROM ocaml/opam:alpine_ocaml-4.03.0
alpine_ocaml-4.03.0: Pulling from ocaml/opam
627beaf3eaaf: Already exists
f0e9cd8b6c44: Already exists
289654561dec: Pulling fs layer
1fc6920a41cd: Pulling fs layer
289654561dec: Verifying Checksum
289654561dec: Pull complete
1fc6920a41cd: Verifying Checksum
1fc6920a41cd: Pull complete
Digest: sha256:278a3d53438dd15c97235aeb2bfde4f07f68c864e35735291767de0c8560ba17
Status: Image is up to date for ocaml/opam:alpine_ocaml-4.03.0
 ---> 1254c1838b00
Step 2/14 : RUN sudo apk add ncurses-dev libev-dev
 ---> Running in 909b62f4942f
(1/2) Installing libev (4.22-r0)
(2/2) Installing libev-dev (4.22-r0)
OK: 582 MiB in 92 packages
 ---> 9f8839f44cce
Error removing intermediate container 909b62f4942f: Driver aufs failed to remove root filesystem 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54: rename /var/lib/docker/aufs/mnt/d1c84f1372e2129604577b56bfb68af0db33fe0702810adb0f2c60488ac139d4 /var/lib/docker/aufs/mnt/d1c84f1372e2129604577b56bfb68af0db33fe0702810adb0f2c60488ac139d4-removing: device or resource busy
Step 3/14 : RUN opam depext lwt && opam install lwt alcotest conf-libev
 ---> Running in 719128304f01
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - m4
The following command needs to be run through "sudo":
    apk add m4
(1/1) Installing m4 (1.4.17-r1)
Executing busybox-1.25.1-r0.trigger
OK: 582 MiB in 93 packages
# OS packages installation successful
The following actions will be performed:
  - install conf-m4    1                                        [required by ocamlfind]
  - install conf-libev 4-11      
  - install result     1.2                                      [required by alcotest, lwt]
  - install uchar      0.0.1                                    [required by fmt]
  - install ocamlfind  1.7.1                                    [required by alcotest, lwt]
  - install topkg      0.9.0                                    [required by alcotest]
  - install ppx_tools  5.0+4.03.0                               [required by lwt]
  - install base-bytes base                                     [required by cppo]
  - install cmdliner   1.0.0                                    [required by alcotest]
  - install astring    0.8.3                                    [required by alcotest]
  - install cppo       1.5.0                                    [required by lwt]
  - install fmt        0.8.3                                    [required by alcotest]
  - install lwt        3.0.0     
  - install alcotest   0.7.2     
===== 14 to install =====
Do you want to continue ? [Y/n] y

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[alcotest: http] Command started
[astring: http] Command started
[cmdliner: http] Command started
[astring: http] Command started
[astring.0.8.3] http://erratique.ch/software/astring/releases/astring-0.8.3.tbz downloaded
[cppo: http] Command started
[cmdliner: http] Command started
[cmdliner.1.0.0] http://erratique.ch/software/cmdliner/releases/cmdliner-1.0.0.tbz downloaded
[fmt: http] Command started
[fmt: http] Command started
[fmt.0.8.3] http://erratique.ch/software/fmt/releases/fmt-0.8.3.tbz downloaded
[lwt: http] Command started
[cppo: http] Command started
[cppo.1.5.0] https://github.com/mjambon/cppo/archive/v1.5.0.tar.gz downloaded
[ocamlfind: http] Command started
[alcotest: http] Command started
[alcotest.0.7.2] https://github.com/mirage/alcotest/releases/download/0.7.2/alcotest-0.7.2.tbz downloaded
[ppx_tools: http] Command started
[ocamlfind: http] Command started
[ocamlfind.1.7.1] http://download.camlcity.org/download/findlib-1.7.1.tar.gz downloaded
[result: http] Command started
[lwt: http] Command started
[lwt.3.0.0] https://github.com/ocsigen/lwt/archive/3.0.0.tar.gz downloaded
[topkg: http] Command started
[topkg: http] Command started
[topkg.0.9.0] http://erratique.ch/software/topkg/releases/topkg-0.9.0.tbz downloaded
[uchar: http] Command started
[result: http] Command started
[result.1.2] https://github.com/janestreet/result/archive/1.2.tar.gz downloaded
[ppx_tools: http] Command started
[ppx_tools.5.0+4.03.0] https://github.com/alainfrisch/ppx_tools/archive/5.0+4.03.0.tar.gz downloaded
[uchar: http] Command started
[uchar.0.0.1] https://github.com/ocaml/uchar/releases/download/v0.0.1/uchar-0.0.1.tbz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[conf-libev: sh] Command started
[conf-m4: sh echo | m4] Command started
[result: make] Command started
[uchar: ocaml] Command started
-> installed conf-m4.1
[ocamlfind: ./configure] Command started
[uchar: ocaml] Command started
-> installed conf-libev.4-11
-> installed result.1.2
-> installed uchar.0.0.1
[ocamlfind: make all] Command started
[ocamlfind: make opt] Command started
[ocamlfind: make install] Command started
-> installed ocamlfind.1.7.1
-> installed base-bytes.base
[cppo: make opt] Command started
[ppx_tools: make all] Command started
[topkg: ocaml build] Command started
[cppo: make ocamlbuild] Command started
[cppo: make install-lib] Command started
-> installed cppo.1.5.0
[ppx_tools: make install] Command started
-> installed ppx_tools.5.0+4.03.0
[lwt: make setup] Command started
-> installed topkg.0.9.0
[astring: ocaml build] Command started
[cmdliner: ocaml build] Command started
[lwt: ocaml setup.ml] Command started
-> installed astring.0.8.3
-> installed cmdliner.1.0.0
[fmt: ocaml build] Command started
-> installed fmt.0.8.3
[alcotest: ocaml build] Command started
-> installed alcotest.0.7.2
[lwt: make build] Command started
[lwt: make install] Command started
-> installed lwt.3.0.0
Done.

=-=- lwt.3.0.0 installed successfully -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> Lwt 3.0.0 made some minor breaking changes, announced in 2.7.0. See
     https://github.com/ocsigen/lwt/issues/308
 ---> 71ab2e243420
Error removing intermediate container 909b62f4942f: No such container: 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54
Step 4/14 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> 34d6e4f4d0f5
Error removing intermediate container 909b62f4942f: No such container: 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54
Step 5/14 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Running in ef11310f2cd6
datakit-client is now path-pinned to /home/opam/src/datakit

[datakit-client: local]
[datakit-client] /home/opam/src/datakit/ synchronized
[datakit-client] Installing new package description from /home/opam/src/datakit

 ---> 6017500215de
Removing intermediate container 20da7035b277
Error removing intermediate container ef11310f2cd6: Driver aufs failed to remove root filesystem ef11310f2cd6180865d81259c1a81b33666f9e92eb0b4e3eebe2ba4debd3d84e: rename /var/lib/docker/aufs/mnt/c1cb5afc0b86c789a6d834e2e1f6c19ad151c019f65575c7f64f97b8636a3a71 /var/lib/docker/aufs/mnt/c1cb5afc0b86c789a6d834e2e1f6c19ad151c019f65575c7f64f97b8636a3a71-removing: device or resource busy
Step 6/14 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Running in 5cdc204b58a1
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - m4
#  - ncurses-dev
#  - pkgconfig
m4
ncurses-dev
pkgconf
# All required OS packages found.

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install   stringext               1.4.3         
  - install   jbuilder                1.0+beta8     
  - install   ocb-stubblr             0.1.1         
  - downgrade lwt                     3.0.0 to 2.7.1
  - install   rresult                 0.5.0         
  - install   ppx_deriving            4.1           
  - install   ocplib-endian           1.0           
  - install   re                      1.7.1         
  - install   mirage-flow             1.2.0         
  - install   win-error               0.2           
  - install   mirage-device           1.0.0         
  - install   sexplib                 v0.9.1        
  - install   ppx_traverse_builtins   v0.9.0        
  - install   ocaml-migrate-parsetree 1.0           
  - install   ocaml-compiler-libs     v0.9.0        
  - install   named-pipe              0.4.0         
  - install   logs                    0.6.2         
  - install   mirage-channel          3.0.0         
  - install   mirage-kv               1.0.0         
  - install   mirage-clock            1.2.0         
  - install   base                    v0.9.2        
  - install   ppx_tools_versioned     5.0beta1      
  - install   ppx_ast                 v0.9.1        
  - install   stdio                   v0.9.0        
  - install   cstruct                 2.4.0         
  - install   ppx_core                v0.9.0        
  - install   mirage-kv-lwt           1.0.0         
  - install   mirage-flow-lwt         1.2.0         
  - install   io-page                 1.6.1         
  - install   ppx_optcomp             v0.9.0        
  - install   mirage-channel-lwt      3.0.0         
  - install   ppx_driver              v0.9.1        
  - install   ppx_metaquot            v0.9.0        
  - install   ppx_type_conv           v0.9.0        
  - install   ppx_sexp_conv           v0.9.0        
  - install   uri                     1.9.2         
  - install   protocol-9p             0.9.0         
===== 36 to install | 1 to downgrade =====
Do you want to continue ? [Y/n] y

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[base: http] Command started
[cstruct: http] Command started
[io-page: http] Command started
[io-page: http] Command started
[io-page.1.6.1] https://github.com/mirage/io-page/archive/v1.6.1.tar.gz downloaded
[jbuilder: http] Command started
[cstruct: http] Command started
[cstruct.2.4.0] https://github.com/mirage/ocaml-cstruct/archive/v2.4.0.tar.gz downloaded
[logs: http] Command started
[base: http] Command started
[base.v0.9.2] https://github.com/janestreet/base/archive/v0.9.2.tar.gz downloaded
[lwt: http] Command started
[logs: http] Command started
[logs.0.6.2] http://erratique.ch/software/logs/releases/logs-0.6.2.tbz downloaded
[mirage-channel: http] Command started
[mirage-channel: http] Command started
[jbuilder: http] Command started
[mirage-channel.3.0.0] https://github.com/mirage/mirage-channel/releases/download/v3.0.0/mirage-channel-3.0.0.tbz downloaded
[mirage-channel-lwt: http] Command started
[jbuilder.1.0+beta8] https://github.com/janestreet/jbuilder/archive/1.0+beta8.tar.gz downloaded
[mirage-clock: http] Command started
[lwt: http] Command started
[lwt.2.7.1] https://github.com/ocsigen/lwt/archive/2.7.1.tar.gz downloaded
[mirage-device: http] Command started
[mirage-clock: http] Command started
[mirage-clock.1.2.0] https://github.com/mirage/mirage-clock/releases/download/1.2.0/mirage-clock-1.2.0.tbz downloaded
[mirage-flow: http] Command started
[mirage-channel-lwt: http] Command started
[mirage-channel-lwt.3.0.0] https://github.com/mirage/mirage-channel/releases/download/v3.0.0/mirage-channel-lwt-3.0.0.tbz downloaded
[mirage-flow-lwt: http] Command started
[mirage-device: http] Command started
[mirage-device.1.0.0] https://github.com/mirage/mirage-device/releases/download/1.0.0/mirage-device-1.0.0.tbz downloaded
[mirage-kv: http] Command started
[mirage-kv: http] Command started
[mirage-kv.1.0.0] https://github.com/mirage/mirage-kv/releases/download/1.0.0/mirage-kv-1.0.0.tbz downloaded
[mirage-kv-lwt: http] Command started
[mirage-flow: http] Command started
[mirage-flow.1.2.0] https://github.com/mirage/mirage-flow/releases/download/1.2.0/mirage-flow-1.2.0.tbz downloaded
[named-pipe: http] Command started
[mirage-flow-lwt: http] Command started
[mirage-flow-lwt.1.2.0] https://github.com/mirage/mirage-flow/releases/download/1.2.0/mirage-flow-lwt-1.2.0.tbz downloaded
[ocaml-compiler-libs: http] Command started
[ocaml-compiler-libs: http] Command started
[ocaml-compiler-libs.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ocaml-compiler-libs-v0.9.0.tar.gz downloaded
[ocaml-migrate-parsetree: http] Command started
[mirage-kv-lwt: http] Command started
[mirage-kv-lwt.1.0.0] https://github.com/mirage/mirage-kv/releases/download/1.0.0/mirage-kv-lwt-1.0.0.tbz downloaded
[ocb-stubblr: http] Command started
[named-pipe: http] Command started
[named-pipe.0.4.0] https://github.com/mirage/ocaml-named-pipe/releases/download/0.4.0/named-pipe-0.4.0.tbz downloaded
[ocplib-endian: http] Command started
[ocaml-migrate-parsetree: http] Command started
[ocaml-migrate-parsetree.1.0] https://github.com/let-def/ocaml-migrate-parsetree/archive/v1.0.tar.gz downloaded
[ppx_ast: http] Command started
[ocb-stubblr: http] Command started
[ocb-stubblr.0.1.1] https://github.com/pqwy/ocb-stubblr/releases/download/v0.1.1/ocb-stubblr-0.1.1.tbz downloaded
[ppx_core: http] Command started
[ocplib-endian: http] Command started
[ocplib-endian.1.0] https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz downloaded
[ppx_deriving: http] Command started
[ppx_core: http] Command started
[ppx_core.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_core-v0.9.0.tar.gz downloaded
[ppx_driver: http] Command started
[ppx_ast: http] Command started
[ppx_ast.v0.9.1] https://github.com/janestreet/ppx_ast/archive/v0.9.1.tar.gz downloaded
[ppx_metaquot: http] Command started
[ppx_metaquot: http] Command started
[ppx_deriving: http] Command started
[ppx_metaquot.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_metaquot-v0.9.0.tar.gz downloaded
[ppx_optcomp: http] Command started
[ppx_deriving.4.1] https://github.com/whitequark/ppx_deriving/archive/v4.1.tar.gz downloaded
[ppx_sexp_conv: http] Command started
[ppx_driver: http] Command started
[ppx_driver.v0.9.1] https://github.com/janestreet/ppx_driver/archive/v0.9.1.tar.gz downloaded
[ppx_tools_versioned: http] Command started
[ppx_optcomp: http] Command started
[ppx_optcomp.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_optcomp-v0.9.0.tar.gz downloaded
[ppx_traverse_builtins: http] Command started
[ppx_sexp_conv: http] Command started
[ppx_sexp_conv.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_sexp_conv-v0.9.0.tar.gz downloaded
[ppx_type_conv: http] Command started
[ppx_traverse_builtins: http] Command started
[ppx_traverse_builtins.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_traverse_builtins-v0.9.0.tar.gz downloaded
[protocol-9p: http] Command started
[ppx_type_conv: http] Command started
[ppx_type_conv.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_type_conv-v0.9.0.tar.gz downloaded
[re: http] Command started
[ppx_tools_versioned: http] Command started
[ppx_tools_versioned.5.0beta1] https://github.com/let-def/ppx_tools_versioned/archive/5.0beta1.tar.gz downloaded
[rresult: http] Command started
[rresult: http] Command started
[rresult.0.5.0] http://erratique.ch/software/rresult/releases/rresult-0.5.0.tbz downloaded
[sexplib: http] Command started
[protocol-9p: http] Command started
[protocol-9p.0.9.0] https://github.com/mirage/ocaml-9p/archive/v0.9.0.tar.gz downloaded
[stdio: http] Command started
[re: http] Command started
[re.1.7.1] https://github.com/ocaml/ocaml-re/archive/1.7.1.tar.gz downloaded
[stringext: http] Command started
[stdio: http] Command started
[stdio.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/stdio-v0.9.0.tar.gz downloaded
[uri: http] Command started
[sexplib: http] Command started
[sexplib.v0.9.1] https://github.com/janestreet/sexplib/archive/v0.9.1.tar.gz downloaded
[win-error: http] Command started
[win-error: http] Command started
[win-error.0.2] https://github.com/djs55/ocaml-win-error/archive/v0.2.tar.gz downloaded
[uri: http] Command started
[uri.1.9.2] https://github.com/mirage/ocaml-uri/archive/v1.9.2.tar.gz downloaded
[stringext: http] Command started
[stringext.1.4.3] https://github.com/rgrinberg/stringext/archive/v1.4.3.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[lwt: ocamlfind remove] Command started
[jbuilder: ocaml bootstrap.ml] Command started
[mirage-device: ocaml build] Command started
[mirage-flow: ocaml build] Command started
-> removed   lwt.3.0.0
[lwt: make setup] Command started
-> installed mirage-device.1.0.0
[mirage-clock: ocaml build] Command started
-> installed mirage-flow.1.2.0
[mirage-channel: ocaml build] Command started
-> installed mirage-channel.3.0.0
[mirage-kv: ocaml build] Command started
-> installed mirage-clock.1.2.0
[ocb-stubblr: ocaml build] Command started
[lwt: ocaml setup.ml] Command started
-> installed mirage-kv.1.0.0
[ocplib-endian: ocaml setup.ml] Command started
-> installed ocb-stubblr.0.1.1
[ppx_deriving: ocaml] Command started
[jbuilder: ./boot.exe 4] Command started
[ocplib-endian: ocaml setup.ml] Command started
[ocplib-endian: ocaml setup.ml] Command started
[lwt: make build] Command started
-> installed ocplib-endian.1.0
[re: ocaml setup.ml] Command started
-> installed jbuilder.1.0+beta8
[ocaml-compiler-libs: jbuilder build] Command started
-> installed ocaml-compiler-libs.v0.9.0
[ocaml-migrate-parsetree: jbuilder build] Command started
[re: ocaml setup.ml] Command started
-> installed ppx_deriving.4.1
[ppx_traverse_builtins: jbuilder build] Command started
-> installed ppx_traverse_builtins.v0.9.0
[rresult: ocaml build] Command started
-> installed rresult.0.5.0
[sexplib: jbuilder build] Command started
[re: ocaml setup.ml] Command started
-> installed sexplib.v0.9.1
[base: jbuilder build] Command started
-> installed ocaml-migrate-parsetree.1.0
[ppx_ast: jbuilder build] Command started
-> installed re.1.7.1
[ppx_tools_versioned: make all] Command started
-> installed ppx_ast.v0.9.1
[stringext: ocaml setup.ml] Command started
[lwt: make install] Command started
-> installed lwt.2.7.1
[logs: ocaml build] Command started
[stringext: ocaml setup.ml] Command started
-> installed base.v0.9.2
[named-pipe: ocaml build] Command started
[ppx_tools_versioned: make install] Command started
-> installed logs.0.6.2
[stdio: jbuilder build] Command started
[stringext: ocaml setup.ml] Command started
-> installed ppx_tools_versioned.5.0beta1
[cstruct: ./configure] Command started
-> installed stdio.v0.9.0
[ppx_core: jbuilder build] Command started
-> installed stringext.1.4.3
[win-error: make] Command started
-> installed named-pipe.0.4.0
[cstruct: make] Command started
[win-error: make install] Command started
-> installed win-error.0.2
-> installed ppx_core.v0.9.0
[ppx_optcomp: jbuilder build] Command started
[cstruct: make install] Command started
[cstruct: make js-install] Command started
-> installed cstruct.2.4.0
[io-page: ./configure] Command started
[mirage-flow-lwt: ocaml build] Command started
[mirage-kv-lwt: ocaml build] Command started
-> installed ppx_optcomp.v0.9.0
[ppx_driver: jbuilder build] Command started
-> installed mirage-kv-lwt.1.0.0
-> installed mirage-flow-lwt.1.2.0
[io-page: make] Command started
-> installed ppx_driver.v0.9.1
[ppx_metaquot: jbuilder build] Command started
[io-page: make install] Command started
-> installed io-page.1.6.1
[mirage-channel-lwt: ocaml build] Command started
-> installed ppx_metaquot.v0.9.0
[ppx_type_conv: jbuilder build] Command started
-> installed mirage-channel-lwt.3.0.0
-> installed ppx_type_conv.v0.9.0
[ppx_sexp_conv: jbuilder build] Command started
-> installed ppx_sexp_conv.v0.9.0
[protocol-9p: ocaml build] Command started
[uri: ocaml setup.ml] Command started
[uri: ocaml setup.ml] Command started
[uri: ocaml setup.ml] Command started
-> installed uri.1.9.2
-> installed protocol-9p.0.9.0
Done.
 ---> 10ebf907f1ef
Error removing intermediate container 909b62f4942f: No such container: 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54
Step 7/14 : COPY . /home/opam/src/datakit
 ---> 6fc6dc8d4b40
Removing intermediate container 719128304f01
Removing intermediate container 5cdc204b58a1
Error removing intermediate container ef11310f2cd6: No such container: ef11310f2cd6180865d81259c1a81b33666f9e92eb0b4e3eebe2ba4debd3d84e
Step 8/14 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 264846d64647
 ---> c0f0cc2f4f9c
Error removing intermediate container ef11310f2cd6: No such container: ef11310f2cd6180865d81259c1a81b33666f9e92eb0b4e3eebe2ba4debd3d84e
Step 9/14 : RUN cd /home/opam/src/datakit &&     git diff && git status --porcelain &&     git checkout . && scripts/watermark.sh &&     git status --porcelain
 ---> Running in 77056165a9a9
diff --git a/Dockerfile.client b/Dockerfile.client
index ab1a6db..152e7db 100644
--- a/Dockerfile.client
+++ b/Dockerfile.client
@@ -1,4 +1,4 @@
-FROM ocaml/opam:alpine
+FROM ocaml/opam:alpine_ocaml-4.03.0
 
 RUN sudo apk add ncurses-dev libev-dev
 RUN opam depext lwt && opam install lwt alcotest conf-libev
 M Dockerfile.client
 M src/version.ml
 ---> 685523718c53
Error removing intermediate container 909b62f4942f: No such container: 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54
Step 10/14 : RUN opam update datakit-client
 ---> Running in 1a16cac5cead

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized
 ---> 3a64a525de8e
Error removing intermediate container 909b62f4942f: No such container: 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54
Step 11/14 : RUN opam info datakit-client --raw
 ---> Running in f9ceaa547ebe
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/docker/datakit"
bug-reports: "https://github.com/docker/datakit/issues"
license: "ISC"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/docker/datakit.git"
build: [
  "ocaml" "pkg/pkg.ml" "build" "--pinned" "%{pinned}%" "-n" "datakit-client"
]
depends: [
  "ocamlfind" {build}
  "ocamlbuild" {build}
  "topkg" {build}
  "base-bytes"
  "astring"
  "logs"
  "uri"
  "rresult"
  "cstruct"
  "fmt"
  "cmdliner"
  "protocol-9p"
]
 ---> e856aa63c6f0
Removing intermediate container 1a16cac5cead
Removing intermediate container f9ceaa547ebe
Error removing intermediate container 909b62f4942f: No such container: 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54
Step 12/14 : RUN opam install datakit-client.dev -vv
 ---> Running in 1cdeb9801db9

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 4,476 bytes  received 34 bytes  9,020.00 bytes/sec
- total size is 532,091  speedup is 117.98
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 4,476 bytes  received 34 bytes  9,020.00 bytes/sec
- total size is 532,091  speedup is 117.98
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: ocaml build] Command started
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "-n" "datakit-client" (CWD=/home/opam/.opam/4.03.0/build/datakit-client.dev)
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/client/datakit_client_9p.ml > src/client/datakit_client_9p.ml.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/client/datakit_client_9p.mli > src/client/datakit_client_9p.mli.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/client/datakit_S.mli > src/client/datakit_S.mli.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/client/datakit_path.mli > src/client/datakit_path.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/client -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -o src/client/datakit_path.cmi src/client/datakit_path.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/client -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -o src/client/datakit_S.cmi src/client/datakit_S.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/client -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -o src/client/datakit_client_9p.cmi src/client/datakit_client_9p.mli
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/client/datakit_path.ml > src/client/datakit_path.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/client -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -o src/client/datakit_path.cmx src/client/datakit_path.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/client -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -o src/client/datakit_client_9p.cmx src/client/datakit_client_9p.ml
- ocamlfind ocamlopt -a -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src/client src/client/datakit_path.cmx src/client/datakit_client_9p.cmx -o src/client/datakit-client.cmxa
- ocamlfind ocamlopt -shared -linkall -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src/client src/client/datakit-client.cmxa -o src/client/datakit-client.cmxs
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/client -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -o src/client/datakit_client_9p.cmo src/client/datakit_client_9p.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/client -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -o src/client/datakit_path.cmo src/client/datakit_path.ml
- ocamlfind ocamlc -a -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src/client src/client/datakit_path.cmo src/client/datakit_client_9p.cmo -o src/client/datakit-client.cma
- ocamlfind ocamldep -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/bin/mount.ml > src/bin/mount.ml.depends
- ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/version.ml > src/version.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -I src/client -o src/version.cmo src/version.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/bin -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -I src/client -o src/bin/mount.cmo src/bin/mount.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -I src/client -o src/version.cmx src/version.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/bin -I src -I bridge/github/src -I src/ivfs -I src/irmin-io -I src/vfs -I src/log -I src/conduit -I src/fs9p -I src/client -o src/bin/mount.cmx src/bin/mount.ml
- ocamlfind ocamlopt -linkpkg -g -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src -I src/bin src/version.cmx src/bin/mount.cmx -o src/bin/mount.native
+ install "-m" "0755" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/bin/mount.native" "/home/opam/.opam/4.03.0/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/datakit-client.opam" "/home/opam/.opam/4.03.0/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/pkg/META.client" "/home/opam/.opam/4.03.0/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit-client.a" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit-client.cma" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit-client.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit-client.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_S.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_S.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_client_9p.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_client_9p.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_client_9p.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_client_9p.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_path.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_path.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_path.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/client/datakit_path.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-client/CHANGES.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/README.md" "/home/opam/.opam/4.03.0/doc/datakit-client/README.md"
-> installed datakit-client.dev
Done.
 ---> 4715f2335c1f
Error removing intermediate container 909b62f4942f: No such container: 909b62f4942f5176ed680e876c74d710b51b1c6181413935dc62c2064e901c54
Step 13/14 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in e7b5a96b57c4
 ---> 8b3b59e135b8
Removing intermediate container 264846d64647
Removing intermediate container 77056165a9a9
Error removing intermediate container ef11310f2cd6: No such container: ef11310f2cd6180865d81259c1a81b33666f9e92eb0b4e3eebe2ba4debd3d84e
Step 14/14 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 0b3be521600c
 ---> 7d56481c41dd
Removing intermediate container 0b3be521600c
Error removing intermediate container ef11310f2cd6: No such container: ef11310f2cd6180865d81259c1a81b33666f9e92eb0b4e3eebe2ba4debd3d84e
Successfully built 7d56481c41dd
[2017-05-02 09:43.25] Success
