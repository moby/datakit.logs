=== Docker build Dockerfile
[2017-06-01 11:50.38] Starting...
Cloning into '/tmp/with_clone6fcef00'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at d4cc23d Merge pull request #585 from samoht/doc
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 7.821 MB
Step 1/32 : FROM ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522: Pulling from ocaml/opam-dev
Digest: sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
Status: Image is up to date for ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
 ---> f03bf6a81395
Step 2/32 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> be24092c1ade
Step 3/32 : RUN sudo apk add tzdata aspcud gmp-dev perl
 ---> Using cache
 ---> efa90027efa0
Step 4/32 : RUN opam pin add git.dev --dev -n
 ---> Using cache
 ---> 1410f859c17c
Step 5/32 : RUN opam pin add irmin.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 0f361c33dc43
Step 6/32 : RUN opam pin add irmin-mem.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 9112e9e58d07
Step 7/32 : RUN opam pin add irmin-git.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 14faee3bb06b
Step 8/32 : RUN opam depext -ui lwt inotify alcotest conf-libev asl win-eventlog     irmin-watcher mtime mirage-flow conduit hvsock prometheus-app git irmin     cmdliner protocol-9p rresult win-error named-pipe
 ---> Using cache
 ---> 4689168a79e3
Step 9/32 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> c32397cf9f97
Step 10/32 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> ce4391f1c949
Step 11/32 : COPY datakit.opam /home/opam/src/datakit/
 ---> Using cache
 ---> 3f6854e340b6
Step 12/32 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> cc32e4bbfa92
Step 13/32 : COPY datakit-client-9p.opam /home/opam/src/datakit/datakit-client-9p.opam
 ---> Using cache
 ---> bb91e958504a
Step 14/32 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> Using cache
 ---> 3db2062ea13c
Step 15/32 : COPY datakit-server-9p.opam /home/opam/src/datakit/datakit-server-9p.opam
 ---> Using cache
 ---> 7fc396328882
Step 16/32 : RUN opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit.dev /home/opam/src/datakit -yn
 ---> Using cache
 ---> 5f7b18e8a9fa
Step 17/32 : RUN opam depext -y datakit
 ---> Using cache
 ---> a75035ee54c6
Step 18/32 : RUN opam install -y --deps-only datakit-client datakit-server
 ---> Using cache
 ---> 8f38db887afa
Step 19/32 : RUN opam install alcotest
 ---> Using cache
 ---> 38d4d06c9024
Step 20/32 : COPY . /home/opam/src/datakit
 ---> b0931277eaaf
Removing intermediate container d47bb7e9d851
Step 21/32 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 7cb3eeafa8eb
 ---> 671bced7c288
Removing intermediate container 7cb3eeafa8eb
Step 22/32 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in b6b554ce49b0
 M src/version.ml
 ---> 55db94fea17d
Error removing intermediate container b6b554ce49b0: Driver aufs failed to remove root filesystem b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b: rename /var/lib/docker/aufs/mnt/dea67eb548c4100a172028e43e2519b57a01d71a23da16863b72e8340cacbb12 /var/lib/docker/aufs/mnt/dea67eb548c4100a172028e43e2519b57a01d71a23da16863b72e8340cacbb12-removing: device or resource busy
Step 23/32 : RUN opam install datakit-client-9p
 ---> Running in f5efd1e54a6e

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-client    dev*                              [required by datakit-client-9p]
  - install protocol-9p-unix  0.11.0                            [required by datakit-client-9p]
  - install datakit-client-9p dev*
===== 3 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[protocol-9p-unix.0.11.0] found in cache
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
-> installed protocol-9p-unix.0.11.0
-> installed datakit-client-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 3f328ec6b280
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 24/32 : RUN opam install datakit -ytv
 ---> Running in 1ab40598cd8d

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install irmin-git         1.2.0*                            [required by datakit]
  - install datakit-server    dev*                              [required by datakit-server-9p]
  - install irmin-mem         1.2.0*                            [required by datakit]
  - install datakit-server-9p dev*                              [required by datakit]
  - install datakit           dev*
===== 5 to install =====
Processing  1/5: [datakit.dev: rsync]
Processing  2/5: [datakit.dev: rsync] [datakit-server.dev: rsync]
Processing  3/5: [datakit.dev: rsync] [datakit-server.dev: rsync] [datakit-server-9p.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit
Processing  3/5: [datakit-server.dev: rsync] [datakit-server-9p.dev: rsync]
Processing  4/5: [datakit-server.dev: rsync] [datakit-server-9p.dev: rsync] [irmin-git.1.2.0: git]
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
Processing  4/5: [datakit-server-9p.dev: rsync] [irmin-git.1.2.0: git]
Processing  5/5: [datakit-server-9p.dev: rsync] [irmin-git.1.2.0: git] [irmin-mem.1.2.0: git]
[datakit-server-9p.dev] synchronised from file:///home/opam/src/datakit
Processing  5/5: [irmin-git.1.2.0: git] [irmin-mem.1.2.0: git]
[irmin-git.1.2.0] synchronised from git+https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
Processing  5/5: [irmin-mem.1.2.0: git]
[irmin-mem.1.2.0] synchronised from git+https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/10: [datakit-server: jbuilder build]
+ jbuilder "build" "-p" "datakit-server" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-server.dev)
-     ocamldep src/datakit-server/datakit_server.depends.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.dependsi.ocamldep-output
-       ocamlc src/datakit-server/vfs.{cmi,cmti}
-       ocamlc src/datakit-server/vfs.{cmo,cmt}
-     ocamlopt src/datakit-server/vfs.{cmx,o}
-       ocamlc src/datakit-server/datakit_server.cma
-     ocamlopt src/datakit-server/datakit_server.{a,cmxa}
-     ocamlopt src/datakit-server/datakit_server.cmxs
-> compiled  datakit-server.dev
Processing  2/10: [irmin-git: jbuilder build]
+ jbuilder "build" "-p" "irmin-git" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/irmin-git.1.2.0)
- File "test/irmin-fs/jbuild", line 11, characters 13-21:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-git/jbuild", line 11, characters 13-22:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-http/jbuild", line 11, characters 13-24:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-mem/jbuild", line 11, characters 13-22:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-unix/jbuild", line 11, characters 13-23:
- Warning: This field is useless without a (public_name ...) field.
-     ocamldep src/irmin-git/irmin_git.depends.ocamldep-output
-     ocamldep src/irmin-git/irmin_git.dependsi.ocamldep-output
-       ocamlc src/irmin-git/irmin_git.{cmi,cmti}
-       ocamlc src/irmin-git/irmin_git.{cmo,cmt}
-     ocamlopt src/irmin-git/irmin_git.{cmx,o}
-       ocamlc src/irmin-git/irmin_git.cma
-     ocamlopt src/irmin-git/irmin_git.{a,cmxa}
-     ocamlopt src/irmin-git/irmin_git.cmxs
-> compiled  irmin-git.1.2.0
Processing  3/10: [irmin-mem: jbuilder build]
+ jbuilder "build" "-p" "irmin-mem" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/irmin-mem.1.2.0)
- File "test/irmin-fs/jbuild", line 11, characters 13-21:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-git/jbuild", line 11, characters 13-22:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-http/jbuild", line 11, characters 13-24:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-mem/jbuild", line 11, characters 13-22:
- Warning: This field is useless without a (public_name ...) field.
- File "test/irmin-unix/jbuild", line 11, characters 13-23:
- Warning: This field is useless without a (public_name ...) field.
-     ocamldep src/irmin-mem/irmin_mem.depends.ocamldep-output
-     ocamldep src/irmin-mem/irmin_mem.dependsi.ocamldep-output
-       ocamlc src/irmin-mem/irmin_mem.{cmi,cmti}
-       ocamlc src/irmin-mem/irmin_mem.{cmo,cmt}
-     ocamlopt src/irmin-mem/irmin_mem.{cmx,o}
-       ocamlc src/irmin-mem/irmin_mem.cma
-     ocamlopt src/irmin-mem/irmin_mem.{a,cmxa}
-     ocamlopt src/irmin-mem/irmin_mem.cmxs
-> compiled  irmin-mem.1.2.0
-> installed datakit-server.dev
Processing  5/10: [datakit-server-9p: jbuilder build]
+ jbuilder "build" "-p" "datakit-server-9p" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-server-9p.dev)
-     ocamldep src/datakit-server-9p/datakit_server_9p.depends.ocamldep-output
-     ocamldep src/datakit-server-9p/datakit_server_9p.dependsi.ocamldep-output
-       ocamlc src/datakit-server-9p/fs9p.{cmi,cmti}
-       ocamlc src/datakit-server-9p/fs9p_error.{cmi,cmti}
-       ocamlc src/datakit-server-9p/fs9p_error.{cmo,cmt}
-     ocamlopt src/datakit-server-9p/fs9p_error.{cmx,o}
-       ocamlc src/datakit-server-9p/fs9p.{cmo,cmt}
-     ocamlopt src/datakit-server-9p/fs9p.{cmx,o}
-       ocamlc src/datakit-server-9p/datakit_server_9p.cma
-     ocamlopt src/datakit-server-9p/datakit_server_9p.{a,cmxa}
-     ocamlopt src/datakit-server-9p/datakit_server_9p.cmxs
-> compiled  datakit-server-9p.dev
-> installed datakit-server-9p.dev
-> installed irmin-git.1.2.0
-> installed irmin-mem.1.2.0
Processing  9/10: [datakit: jbuilder build]
+ jbuilder "build" "-p" "datakit" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
-     ocamldep src/datakit/bin/main.depends.ocamldep-output
-     ocamldep src/datakit/datakit.depends.ocamldep-output
-     ocamldep src/datakit/datakit.dependsi.ocamldep-output
-       ocamlc src/datakit/datakit__.{cmi,cmo,cmt}
-     ocamldep src/datakit-conduit/datakit_conduit.depends.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.depends.ocamldep-output
-     ocamldep src/datakit-log/datakit_log.depends.ocamldep-output
-     ocamldep src/datakit-conduit/datakit_conduit.dependsi.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.dependsi.ocamldep-output
-     ocamldep src/datakit-log/datakit_log.dependsi.ocamldep-output
-     ocamlopt src/datakit/datakit__.{cmx,o}
-       ocamlc src/datakit/datakit.{cmi,cmti}
-       ocamlc src/datakit/datakit__Blob.{cmi,cmti}
-       ocamlc src/datakit/datakit__Branch.{cmi,cmti}
-       ocamlc src/datakit/datakit__Metadata.{cmi,cmti}
-       ocamlc src/datakit/datakit__Path.{cmi,cmti}
-       ocamlc src/datakit-conduit/datakit_conduit.{cmi,cmti}
-       ocamlc src/datakit-io/datakit_io.{cmi,cmti}
-       ocamlc src/datakit-log/datakit_log.{cmi,cmti}
-       ocamlc src/datakit/datakit__Blob.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Blob.{cmx,o}
-       ocamlc src/datakit/datakit__Branch.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Branch.{cmx,o}
-       ocamlc src/datakit/datakit__Metadata.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Metadata.{cmx,o}
-       ocamlc src/datakit/datakit__Path.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Path.{cmx,o}
-       ocamlc src/datakit/datakit__Store.{cmi,cmti}
-     ocamlopt src/datakit-conduit/datakit_conduit.{cmx,o}
-     ocamlopt src/datakit-io/datakit_io.{cmx,o}
-     ocamlopt src/datakit-log/datakit_log.{cmx,o}
-       ocamlc src/datakit/datakit__Store.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Store.{cmx,o}
-       ocamlc src/datakit/datakit__Dir.{cmi,cmti}
-       ocamlc src/datakit/datakit__Merge.{cmi,cmti}
-       ocamlc src/datakit/datakit__Remote.{cmi,cmti}
-     ocamlopt src/datakit-conduit/datakit_conduit.{a,cmxa}
-     ocamlopt src/datakit-io/datakit_io.{a,cmxa}
-     ocamlopt src/datakit-log/datakit_log.{a,cmxa}
-       ocamlc src/datakit/datakit__Dir.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Dir.{cmx,o}
-       ocamlc src/datakit/datakit__Merge.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Merge.{cmx,o}
-       ocamlc src/datakit/datakit__Remote.{cmo,cmt}
-     ocamlopt src/datakit/datakit__Remote.{cmx,o}
-       ocamlc src/datakit/bin/autopush.{cmi,cmo,cmt}
-       ocamlc src/datakit/bin/version.{cmi,cmo,cmt}
-       ocamlc src/datakit/datakit.{cmo,cmt}
-     ocamlopt src/datakit/datakit.{cmx,o}
-       ocamlc src/datakit/bin/main.{cmi,cmo,cmt}
-       ocamlc src/datakit/datakit.cma
-     ocamlopt src/datakit/bin/autopush.{cmx,o}
-     ocamlopt src/datakit/bin/version.{cmx,o}
-     ocamlopt src/datakit/datakit.{a,cmxa}
-     ocamlopt src/datakit/bin/main.{cmx,o}
-     ocamlopt src/datakit/datakit.cmxs
-     ocamlopt src/datakit/bin/main.exe
Processing  9/10: [datakit: jbuilder runtest]
+ jbuilder "runtest" "tests/datakit" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
-     ocamldep tests/datakit/test.depends.ocamldep-output
-     ocamldep src/datakit-server-9p/datakit_server_9p.dependsi.ocamldep-output
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-     ocamldep src/datakit-server-9p/datakit_server_9p.depends.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.dependsi.ocamldep-output
-     ocamldep tests/common/test.dependsi.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-     ocamldep tests/datakit/test.dependsi.ocamldep-output
-     ocamldep tests/common/test.depends.ocamldep-output
-       ocamlc src/datakit-server/vfs.{cmi,cmti}
-       ocamlc api/ocaml/datakit_client.{cmi,cmti}
-       ocamlc src/datakit/datakit__Branch.{cmi,cmti}
-       ocamlc src/datakit/datakit__Blob.{cmi,cmti}
-       ocamlc src/datakit-server-9p/fs9p.{cmi,cmti}
-       ocamlc src/datakit/datakit__Metadata.{cmi,cmti}
-       ocamlc src/datakit/datakit__Path.{cmi,cmti}
-       ocamlc src/datakit-server-9p/fs9p_error.{cmi,cmti}
-       ocamlc tests/common/test_client.{cmi,cmti}
-     ocamlopt api/ocaml/datakit_client.{cmx,o}
-     ocamlopt src/datakit-server/vfs.{cmx,o}
-       ocamlc src/datakit/datakit.{cmi,cmti}
-       ocamlc src/datakit-conduit/datakit_conduit.{cmi,cmti}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-       ocamlc tests/common/test_utils.{cmi,cmo,cmt}
-     ocamlopt src/datakit/datakit__Branch.{cmx,o}
-     ocamlopt src/datakit/datakit__Metadata.{cmx,o}
-       ocamlc src/datakit/datakit__Store.{cmi,cmti}
-     ocamlopt src/datakit-server-9p/fs9p_error.{cmx,o}
-     ocamlopt src/datakit-server/datakit_server.{a,cmxa}
-     ocamlopt src/datakit/datakit__Blob.{cmx,o}
-     ocamlopt src/datakit/datakit__Path.{cmx,o}
-       ocamlc src/datakit/datakit__Dir.{cmi,cmti}
-       ocamlc src/datakit/datakit__Merge.{cmi,cmti}
-       ocamlc src/datakit/datakit__Remote.{cmi,cmti}
-       ocamlc tests/datakit/test.{cmi,cmti}
-     ocamlopt tests/common/test_utils.{cmx,o}
-     ocamlopt src/datakit-server-9p/fs9p.{cmx,o}
-     ocamlopt src/datakit/datakit__Store.{cmx,o}
-     ocamlopt src/datakit-server-9p/datakit_server_9p.{a,cmxa}
-     ocamlopt src/datakit/datakit__Dir.{cmx,o}
-     ocamlopt src/datakit-conduit/datakit_conduit.{cmx,o}
-     ocamlopt src/datakit-conduit/datakit_conduit.{a,cmxa}
-     ocamlopt src/datakit/datakit__Merge.{cmx,o}
-     ocamlopt src/datakit/datakit__Remote.{cmx,o}
-     ocamlopt tests/common/test_client.{cmx,o}
-     ocamlopt tests/common/test.{a,cmxa}
-     ocamlopt src/datakit/datakit.{cmx,o}
-     ocamlopt src/datakit/datakit.{a,cmxa}
-     ocamlopt tests/datakit/test.{cmx,o}
-     ocamlopt tests/datakit/test.exe
-         test alias tests/datakit/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit.
- [33m ...[m                [36mserver[m           0   Writes.[32m[OK][m                [36mserver[m           0   Writes.
- [33m ...[m                [36mserver[m           1   RW.[32m[OK][m                [36mserver[m           1   RW.
- [33m ...[m                [36mserver[m           2   Blobs fast.[32m[OK][m                [36mserver[m           2   Blobs fast.
- [33m ...[m                [36mserver[m           3   Blobs random.[32m[OK][m                [36mserver[m           3   Blobs random.
- [33m ...[m                [36mserver[m           4   Streams.[32m[OK][m                [36mserver[m           4   Streams.
- [33m ...[m                [36mconduit[m          0   basic.[32m[OK][m                [36mconduit[m          0   basic.
- The full test results are available in `_build/_tests`.
- [32mTest Successful[m in 0.004s. 6 tests run.
+ jbuilder "runtest" "tests/datakit-9p" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
-     ocamldep tests/datakit-9p/test.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.dependsi.ocamldep-output
-     ocamldep tests/datakit-9p/test.dependsi.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.depends.ocamldep-output
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmi,cmti}
-       ocamlc tests/datakit-9p/test.{cmi,cmti}
-     ocamlopt api/ocaml/9p/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/9p/datakit_client_9p.{a,cmxa}
-     ocamlopt tests/datakit-9p/test.{cmx,o}
-     ocamlopt tests/datakit-9p/test.exe
-         test alias tests/datakit-9p/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit-9p.
- [33m ...[m                [36mserver[m          0   Transaction.[32m[OK][m                [36mserver[m          0   Transaction.
- [33m ...[m                [36mserver[m          1   Qids.[32m[OK][m                [36mserver[m          1   Qids.
- [33m ...[m                [36mserver[m          2   Watch.[32m[OK][m                [36mserver[m          2   Watch.
- [33m ...[m                [36mserver[m          3   Range.[32m[OK][m                [36mserver[m          3   Range.
- [33m ...[m                [36mserver[m          4   Rename branch.[32m[OK][m                [36mserver[m          4   Rename branch.
- [33m ...[m                [36mserver[m          5   Rename file.[32m[OK][m                [36mserver[m          5   Rename file.
- [33m ...[m                [36mserver[m          6   Truncate.[32m[OK][m                [36mserver[m          6   Truncate.
- [33m ...[m                [36mserver[m          7   Parents.[32m[OK][m                [36mserver[m          7   Parents.
- [33m ...[m                [36mserver[m          8   Merge.[32m[OK][m                [36mserver[m          8   Merge.
- [33m ...[m                [36mserver[m          9   Merge_metadata.[32m[OK][m                [36mserver[m          9   Merge_metadata.
- [33m ...[m                [36mserver[m         10   Merge empty.[32m[OK][m                [36mserver[m         10   Merge empty.
- [33m ...[m                [36mserver[m         11   Conflicts.[32m[OK][m                [36mserver[m         11   Conflicts.
- [33m ...[m                [36mserver[m         12   Stable inodes.[32m[OK][m                [36mserver[m         12   Stable inodes.
- [33m ...[m                [36mserver[m         13   Remotes.[33m[SKIP][m              [36mserver[m         13   Remotes.
- [33m ...[m                [36mserver[m         14   Debug.[32m[OK][m                [36mserver[m         14   Debug.
- [33m ...[m                [36mclient[m          0   Transaction.[32m[OK][m                [36mclient[m          0   Transaction.
- [33m ...[m                [36mclient[m          1   Watch.[32m[OK][m                [36mclient[m          1   Watch.
- [33m ...[m                [36mclient[m          2   Make dirs.[32m[OK][m                [36mclient[m          2   Make dirs.
- [33m ...[m                [36mclient[m          3   Truncate.[32m[OK][m                [36mclient[m          3   Truncate.
- [33m ...[m                [36mclient[m          4   Parents.[32m[OK][m                [36mclient[m          4   Parents.
- [33m ...[m                [36mclient[m          5   Merge.[32m[OK][m                [36mclient[m          5   Merge.
- [33m ...[m                [36mclient[m          6   Diff.[32m[OK][m                [36mclient[m          6   Diff.
- [33m ...[m                [36mclient[m          7   Merge_metadata.[32m[OK][m                [36mclient[m          7   Merge_metadata.
- [33m ...[m                [36mclient[m          8   Merge empty.[32m[OK][m                [36mclient[m          8   Merge empty.
- [33m ...[m                [36mclient[m          9   Conflicts.[32m[OK][m                [36mclient[m          9   Conflicts.
- [33m ...[m                [36mclient[m         10   Large write.[32m[OK][m                [36mclient[m         10   Large write.
- [33m ...[m                [36mclient[m         11   Remove.[32m[OK][m                [36mclient[m         11   Remove.
- [33m ...[m                [36mclient[m         12   Remotes.[33m[SKIP][m              [36mclient[m         12   Remotes.
- [33m ...[m                [36mclient[m         13   Create_or_replace.[33m[SKIP][m              [36mclient[m         13   Create_or_replace.
- The full test results are available in `_build/_tests`.
- [32mTest Successful[m in 0.272s. 26 tests run.
-> compiled  datakit.dev
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 9ce3de071315
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 25/32 : RUN sudo cp $(opam config exec -- which datakit) /usr/bin/datakit &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in 408a013e37f7
 ---> 719105cc53bf
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 26/32 : FROM alpine:3.5
3.5: Pulling from library/alpine
Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
Status: Image is up to date for alpine:3.5
 ---> 75b63e430bd1
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 27/32 : RUN apk add --no-cache libev gmp tzdata ca-certificates git openssh-client bash
 ---> Using cache
 ---> 833cd8570bbb
Removing intermediate container 1ab40598cd8d
Removing intermediate container 408a013e37f7
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 28/32 : EXPOSE 5640
 ---> Using cache
 ---> 1bdbe2d41df3
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 29/32 : ENTRYPOINT /usr/bin/datakit
 ---> Using cache
 ---> f7054f1d2ad4
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 30/32 : CMD --url=tcp://0.0.0.0:5640 --git=/data -v
 ---> Using cache
 ---> 168eb37a21f1
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 31/32 : COPY --from=0 /usr/bin/datakit /usr/bin/datakit
 ---> 085a0fc41b81
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Step 32/32 : COPY --from=0 /usr/bin/datakit-mount /usr/bin/datakit-mount
 ---> 6b4cdbc1816d
Removing intermediate container f5efd1e54a6e
Removing intermediate container e8dfd2229f9b
Removing intermediate container f2eb0415e334
Error removing intermediate container b6b554ce49b0: No such container: b6b554ce49b0244a9d70585362332c73409846685dec3640536f2c29545e842b
Successfully built 6b4cdbc1816d
[2017-06-01 11:52.04] Success
