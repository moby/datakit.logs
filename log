=== Docker build Dockerfile.ci
[2017-05-17 00:16.58] Starting...
Cloning into '/tmp/with_clone1f85c89f'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 56e6e7d appveyor: also pin Git packages to their dev versions
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.587 MB
Step 1/21 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/21 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset origin/master --hard &&     opam update -u
 ---> Using cache
 ---> 52e71e2e863a
Step 3/21 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> cfabc32e9e4f
Step 4/21 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> 51ed7ede4caa
Step 5/21 : RUN opam pin add irmin.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 9bf3aae3873d
Step 6/21 : RUN opam pin add irmin-mem.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> d75af2d46659
Step 7/21 : RUN opam pin add irmin-fs.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> da57905cc30f
Step 8/21 : RUN opam pin add irmin-http.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 0c6757ba162a
Step 9/21 : RUN opam pin add irmin-git.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 8b909c47ff33
Step 10/21 : RUN opam pin add irmin-unix.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> f227946a02a1
Step 11/21 : RUN opam depext -i asl win-eventlog camlzip alcotest mtime mirage-flow hvsock     git irmin irmin-unix lwt protocol-9p-unix tyxml redis multipart-form-data     pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner     webmachine alcotest
 ---> Using cache
 ---> 5278e969548a
Step 12/21 : ADD . /home/opam/datakit
 ---> 45efebecd9fb
Removing intermediate container 7b2d913b8057
Step 13/21 : RUN sudo chown opam /home/opam/datakit
 ---> Running in cc9c14eebee5
 ---> 8b28ed004960
Removing intermediate container cc9c14eebee5
Step 14/21 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 643c032963f3
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client dev*
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 64f2fe216ff9
Removing intermediate container 643c032963f3
Step 15/21 : RUN opam pin add -k git datakit-client-9p.dev /home/opam/datakit -y
 ---> Running in 6cc4f49f1939
Package datakit-client-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta
[0mdatakit-client-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client-9p dev*
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 7a1516cba3e1
Error removing intermediate container 6cc4f49f1939: Driver aufs failed to remove root filesystem 6cc4f49f1939ef1136fafb9053769c26431d8f746c07bd7406e7a807c6637901: rename /var/lib/docker/aufs/mnt/da98285c77fbcfda5e50d45e46068c7685e6fe5d990a22c4813cfa27d2c29d48 /var/lib/docker/aufs/mnt/da98285c77fbcfda5e50d45e46068c7685e6fe5d990a22c4813cfa27d2c29d48-removing: device or resource busy
Step 16/21 : RUN opam pin add -k git datakit-server.dev /home/opam/datakit -y
 ---> Running in a97b2188494d
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev*
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 1151bc82f792
Error removing intermediate container 6cc4f49f1939: No such container: 6cc4f49f1939ef1136fafb9053769c26431d8f746c07bd7406e7a807c6637901
Step 17/21 : RUN opam pin add -k git datakit-server-9p.dev /home/opam/datakit -y
 ---> Running in 8419bfe673cb
Package datakit-server-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta
[0mdatakit-server-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server-9p dev*
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 17fbe02b0230
Error removing intermediate container 6cc4f49f1939: No such container: 6cc4f49f1939ef1136fafb9053769c26431d8f746c07bd7406e7a807c6637901
Step 18/21 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in cf79239ab7f3
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> eb91a92e0b9a
Removing intermediate container a97b2188494d
Removing intermediate container 8419bfe673cb
Removing intermediate container cf79239ab7f3
Error removing intermediate container 6cc4f49f1939: No such container: 6cc4f49f1939ef1136fafb9053769c26431d8f746c07bd7406e7a807c6637901
Step 19/21 : RUN opam pin add -k git datakit.dev /home/opam/datakit -y
 ---> Running in f127b86ee4d3
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - remove  irmin-unix 1.2.0*                                   [uses git-unix]
  - install irmin-mem  1.2.0*                                   [required by datakit]
  - remove  git-unix   1.10.1                                   [conflicts with mtime]
  - upgrade mtime      0.8.4 to 1.0.0                           [required by datakit]
  - install datakit    dev*
===== 2 to install | 1 to upgrade | 2 to remove =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[mtime.1.0.0] downloaded from http://erratique.ch/software/mtime/releases/mtime-1.0.0.tbz
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[irmin-mem.1.2.0] synchronised from git+https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   irmin-unix.1.2.0
-> removed   git-unix.1.10.1
-> removed   mtime.0.8.4
-> installed irmin-mem.1.2.0
-> installed mtime.1.0.0
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> f0bf495d8199
Error removing intermediate container 6cc4f49f1939: No such container: 6cc4f49f1939ef1136fafb9053769c26431d8f746c07bd7406e7a807c6637901
Step 20/21 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in 5d586bb73e7a
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 04ff070aa259
Error removing intermediate container 6cc4f49f1939: No such container: 6cc4f49f1939ef1136fafb9053769c26431d8f746c07bd7406e7a807c6637901
Step 21/21 : VOLUME /secrets
 ---> Running in 7f536b56a8ee
 ---> c496a0310792
Removing intermediate container f127b86ee4d3
Removing intermediate container 5d586bb73e7a
Removing intermediate container 7f536b56a8ee
Error removing intermediate container 6cc4f49f1939: No such container: 6cc4f49f1939ef1136fafb9053769c26431d8f746c07bd7406e7a807c6637901
Successfully built c496a0310792
[2017-05-17 00:19.08] Success
